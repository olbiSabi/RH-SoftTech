# Generated by Django 5.0.6 on 2026-02-02 11:12

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('contenttypes', '0002_remove_content_type_name'),
        ('departement', '0002_initial'),
        ('employee', '0002_alter_zyre_unique_together'),
        ('project_management', '0002_alter_jrticket_statut'),
    ]

    operations = [
        migrations.CreateModel(
            name='GACBonCommande',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('numero', models.CharField(editable=False, max_length=30, unique=True, verbose_name='Numéro')),
                ('statut', models.CharField(choices=[('BROUILLON', 'Brouillon'), ('EMIS', 'Émis'), ('ENVOYE', 'Envoyé'), ('CONFIRME', 'Confirmé'), ('RECU_PARTIEL', 'Reçu partiel'), ('RECU_COMPLET', 'Reçu complet'), ('ANNULE', 'Annulé')], default='BROUILLON', max_length=20, verbose_name='Statut')),
                ('date_livraison_souhaitee', models.DateField(blank=True, null=True, verbose_name='Date de livraison souhaitée')),
                ('date_livraison_confirmee', models.DateField(blank=True, null=True, verbose_name='Date de livraison confirmée')),
                ('adresse_livraison', models.TextField(blank=True, verbose_name='Adresse de livraison')),
                ('conditions_paiement', models.CharField(blank=True, choices=[('COMPTANT', 'Comptant'), ('30_JOURS', '30 jours'), ('45_JOURS', '45 jours'), ('60_JOURS', '60 jours'), ('90_JOURS', '90 jours')], max_length=50, verbose_name='Conditions de paiement')),
                ('numero_confirmation_fournisseur', models.CharField(blank=True, max_length=30, verbose_name='Numéro de confirmation fournisseur')),
                ('montant_total_ht', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total HT')),
                ('montant_total_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TVA')),
                ('montant_total_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TTC')),
                ('fichier_pdf', models.FileField(blank=True, null=True, upload_to='gestion_achats/bons_commande/', verbose_name='Fichier PDF')),
                ('date_envoi', models.DateTimeField(blank=True, null=True, verbose_name="Date d'envoi")),
                ('email_envoi', models.EmailField(blank=True, max_length=254, verbose_name="Email d'envoi")),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_emission', models.DateTimeField(blank=True, null=True, verbose_name="Date d'émission")),
                ('date_reception_complete', models.DateTimeField(blank=True, null=True, verbose_name='Date de réception complète')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('motif_annulation', models.TextField(blank=True, verbose_name="Motif d'annulation")),
                ('date_annulation', models.DateTimeField(blank=True, null=True, verbose_name="Date d'annulation")),
                ('acheteur', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bons_commande_crees', to='employee.zy00', verbose_name='Acheteur')),
                ('cree_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bc_crees', to='employee.zy00', verbose_name='Créé par')),
            ],
            options={
                'verbose_name': 'Bon de commande',
                'verbose_name_plural': 'Bons de commande',
                'ordering': ['-date_creation'],
            },
        ),
        migrations.CreateModel(
            name='GACBudget',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Code budget')),
                ('libelle', models.CharField(max_length=200, verbose_name='Libellé')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('montant_initial', models.DecimalField(decimal_places=2, max_digits=15, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Montant initial')),
                ('montant_engage', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant engagé')),
                ('montant_commande', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant commandé')),
                ('montant_consomme', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant consommé')),
                ('exercice', models.IntegerField(verbose_name='Exercice (année)')),
                ('date_debut', models.DateField(verbose_name='Date de début')),
                ('date_fin', models.DateField(verbose_name='Date de fin')),
                ('seuil_alerte_1', models.DecimalField(decimal_places=2, default=Decimal('80.0'), max_digits=5, verbose_name='Seuil alerte 1 (%)')),
                ('seuil_alerte_2', models.DecimalField(decimal_places=2, default=Decimal('95.0'), max_digits=5, verbose_name='Seuil alerte 2 (%)')),
                ('alerte_1_envoyee', models.BooleanField(default=False, verbose_name='Alerte 1 envoyée')),
                ('alerte_2_envoyee', models.BooleanField(default=False, verbose_name='Alerte 2 envoyée')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('cree_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='budgets_crees', to='employee.zy00', verbose_name='Créé par')),
                ('departement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='budgets', to='departement.zdde', verbose_name='Département')),
                ('gestionnaire', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='budgets_geres', to='employee.zy00', verbose_name='Gestionnaire')),
            ],
            options={
                'verbose_name': 'Budget',
                'verbose_name_plural': 'Budgets',
                'ordering': ['-exercice', 'code'],
            },
        ),
        migrations.CreateModel(
            name='GACCategorie',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('nom', models.CharField(max_length=200, verbose_name='Nom')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Code')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('ordre', models.IntegerField(default=0, verbose_name="Ordre d'affichage")),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('cree_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='categories_creees_gac', to='employee.zy00', verbose_name='Créé par')),
                ('modifie_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='categories_modifiees_gac', to='employee.zy00', verbose_name='Modifié par')),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sous_categories', to='gestion_achats.gaccategorie', verbose_name='Catégorie parente')),
            ],
            options={
                'verbose_name': 'Catégorie',
                'verbose_name_plural': 'Catégories',
                'ordering': ['ordre', 'nom'],
            },
        ),
        migrations.CreateModel(
            name='GACArticle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('reference', models.CharField(max_length=50, unique=True, verbose_name='Référence')),
                ('designation', models.CharField(max_length=200, verbose_name='Désignation')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('unite', models.CharField(choices=[('piece', 'Pièce'), ('kg', 'Kilogramme'), ('litre', 'Litre'), ('metre', 'Mètre'), ('m2', 'Mètre carré'), ('m3', 'Mètre cube'), ('heure', 'Heure'), ('jour', 'Jour'), ('lot', 'Lot'), ('paquet', 'Paquet')], default='piece', max_length=20, verbose_name='Unité')),
                ('prix_unitaire', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Prix unitaire HT')),
                ('taux_tva', models.DecimalField(decimal_places=2, default=Decimal('20.0'), max_digits=5, verbose_name='Taux de TVA (%)')),
                ('statut', models.CharField(choices=[('ACTIF', 'Actif'), ('INACTIF', 'Inactif')], default='ACTIF', max_length=20, verbose_name='Statut')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('cree_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='articles_crees', to='employee.zy00', verbose_name='Créé par')),
                ('categorie', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='articles', to='gestion_achats.gaccategorie', verbose_name='Catégorie')),
            ],
            options={
                'verbose_name': 'Article',
                'verbose_name_plural': 'Articles',
                'ordering': ['reference'],
            },
        ),
        migrations.CreateModel(
            name='GACDemandeAchat',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('numero', models.CharField(editable=False, max_length=30, unique=True, verbose_name='Numéro')),
                ('objet', models.CharField(max_length=200, verbose_name='Objet')),
                ('justification', models.TextField(verbose_name='Justification')),
                ('priorite', models.CharField(choices=[('BASSE', 'Basse'), ('NORMALE', 'Normale'), ('HAUTE', 'Haute'), ('URGENTE', 'Urgente')], default='NORMALE', max_length=20, verbose_name='Priorité')),
                ('statut', models.CharField(choices=[('BROUILLON', 'Brouillon'), ('SOUMISE', 'Soumise'), ('VALIDEE_N1', 'Validée N1'), ('VALIDEE_N2', 'Validée N2'), ('CONVERTIE_BC', 'Convertie en BC'), ('REFUSEE', 'Refusée'), ('ANNULEE', 'Annulée')], default='BROUILLON', max_length=20, verbose_name='Statut')),
                ('date_validation_n1', models.DateTimeField(blank=True, null=True, verbose_name='Date validation N1')),
                ('commentaire_validation_n1', models.TextField(blank=True, verbose_name='Commentaire validation N1')),
                ('date_validation_n2', models.DateTimeField(blank=True, null=True, verbose_name='Date validation N2')),
                ('commentaire_validation_n2', models.TextField(blank=True, verbose_name='Commentaire validation N2')),
                ('motif_refus', models.TextField(blank=True, verbose_name='Motif de refus')),
                ('date_refus', models.DateTimeField(blank=True, null=True, verbose_name='Date de refus')),
                ('motif_annulation', models.TextField(blank=True, verbose_name="Motif d'annulation")),
                ('date_annulation', models.DateTimeField(blank=True, null=True, verbose_name="Date d'annulation")),
                ('montant_total_ht', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total HT')),
                ('montant_total_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TVA')),
                ('montant_total_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TTC')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_soumission', models.DateTimeField(blank=True, null=True, verbose_name='Date de soumission')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('bon_commande', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demande_origine', to='gestion_achats.gacboncommande', verbose_name='Bon de commande')),
                ('budget', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes', to='gestion_achats.gacbudget', verbose_name='Budget')),
                ('cree_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_creees', to='employee.zy00', verbose_name='Créé par')),
                ('demandeur', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='demandes_achat', to='employee.zy00', verbose_name='Demandeur')),
                ('departement', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_achat', to='departement.zdde', verbose_name='Département')),
                ('projet', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_achat', to='project_management.jrproject', verbose_name='Projet lié')),
                ('validateur_n1', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_a_valider_n1', to='employee.zy00', verbose_name='Validateur N1')),
                ('validateur_n2', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_a_valider_n2', to='employee.zy00', verbose_name='Validateur N2')),
            ],
            options={
                'verbose_name': "Demande d'achat",
                'verbose_name_plural': "Demandes d'achat",
                'ordering': ['-date_creation'],
            },
        ),
        migrations.AddField(
            model_name='gacboncommande',
            name='demande_achat',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bons_commande', to='gestion_achats.gacdemandeachat', verbose_name="Demande d'achat"),
        ),
        migrations.CreateModel(
            name='GACFournisseur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('code', models.CharField(max_length=20, unique=True, verbose_name='Code fournisseur')),
                ('raison_sociale', models.CharField(max_length=200, verbose_name='Raison sociale')),
                ('siret', models.CharField(max_length=14, unique=True, verbose_name='SIRET')),
                ('numero_tva', models.CharField(blank=True, max_length=20, verbose_name='Numéro de TVA intracommunautaire')),
                ('email', models.EmailField(max_length=254, validators=[django.core.validators.EmailValidator()], verbose_name='Email')),
                ('telephone', models.CharField(max_length=20, verbose_name='Téléphone')),
                ('fax', models.CharField(blank=True, max_length=20, verbose_name='Fax')),
                ('adresse', models.TextField(verbose_name='Adresse')),
                ('code_postal', models.CharField(max_length=10, verbose_name='Code postal')),
                ('ville', models.CharField(max_length=100, verbose_name='Ville')),
                ('pays', models.CharField(default='France', max_length=100, verbose_name='Pays')),
                ('nom_contact', models.CharField(blank=True, max_length=200, verbose_name='Nom du contact')),
                ('email_contact', models.EmailField(blank=True, max_length=254, verbose_name='Email du contact')),
                ('telephone_contact', models.CharField(blank=True, max_length=20, verbose_name='Téléphone du contact')),
                ('conditions_paiement', models.CharField(choices=[('COMPTANT', 'Comptant'), ('30_JOURS', '30 jours'), ('45_JOURS', '45 jours'), ('60_JOURS', '60 jours'), ('90_JOURS', '90 jours')], default='30_JOURS', max_length=50, verbose_name='Conditions de paiement')),
                ('iban', models.CharField(blank=True, max_length=34, verbose_name='IBAN')),
                ('evaluation_moyenne', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=3, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Évaluation moyenne')),
                ('statut', models.CharField(choices=[('ACTIF', 'Actif'), ('INACTIF', 'Inactif'), ('SUSPENDU', 'Suspendu')], default='ACTIF', max_length=20, verbose_name='Statut')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('cree_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fournisseurs_crees', to='employee.zy00', verbose_name='Créé par')),
            ],
            options={
                'verbose_name': 'Fournisseur',
                'verbose_name_plural': 'Fournisseurs',
                'ordering': ['raison_sociale'],
            },
        ),
        migrations.CreateModel(
            name='GACBonRetour',
            fields=[
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='Identifiant unique')),
                ('numero', models.CharField(editable=False, max_length=30, unique=True, verbose_name='Numéro de bon de retour')),
                ('statut', models.CharField(choices=[('BROUILLON', 'Brouillon'), ('EMIS', 'Émis'), ('ENVOYE', 'Envoyé au fournisseur'), ('RECU_FOURNISSEUR', 'Reçu par le fournisseur'), ('REMBOURSE', 'Remboursé'), ('AVOIR_EMIS', 'Avoir émis'), ('ANNULE', 'Annulé')], default='BROUILLON', max_length=20, verbose_name='Statut')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_emission', models.DateTimeField(blank=True, null=True, verbose_name="Date d'émission")),
                ('date_envoi', models.DateTimeField(blank=True, null=True, verbose_name="Date d'envoi au fournisseur")),
                ('date_reception_fournisseur', models.DateTimeField(blank=True, null=True, verbose_name='Date de réception par le fournisseur')),
                ('motif_retour', models.TextField(verbose_name='Motif du retour')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('montant_total_ht', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total HT')),
                ('montant_total_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TVA')),
                ('montant_total_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant total TTC')),
                ('avoir_recu', models.BooleanField(default=False, verbose_name='Avoir reçu')),
                ('montant_avoir', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name="Montant de l'avoir")),
                ('numero_avoir', models.CharField(blank=True, max_length=50, verbose_name="Numéro de l'avoir")),
                ('date_avoir', models.DateField(blank=True, null=True, verbose_name="Date de l'avoir")),
                ('bon_commande', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bons_retour', to='gestion_achats.gacboncommande', verbose_name='Bon de commande')),
                ('cree_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bons_retour_crees_gac', to='employee.zy00', verbose_name='Créé par')),
                ('emis_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='bons_retour_emis_gac', to='employee.zy00', verbose_name='Émis par')),
                ('fournisseur', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bons_retour', to='gestion_achats.gacfournisseur', verbose_name='Fournisseur')),
            ],
            options={
                'verbose_name': 'Bon de retour fournisseur',
                'verbose_name_plural': 'Bons de retour fournisseur',
                'ordering': ['-date_creation'],
            },
        ),
        migrations.AddField(
            model_name='gacboncommande',
            name='fournisseur',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bons_commande', to='gestion_achats.gacfournisseur', verbose_name='Fournisseur'),
        ),
        migrations.CreateModel(
            name='GACArticleFournisseur',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('reference_fournisseur', models.CharField(blank=True, max_length=50, verbose_name='Référence fournisseur')),
                ('prix_fournisseur', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Prix fournisseur HT')),
                ('delai_livraison', models.IntegerField(default=0, verbose_name='Délai de livraison (jours)')),
                ('fournisseur_principal', models.BooleanField(default=False, verbose_name='Fournisseur principal')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='gestion_achats.gacarticle', verbose_name='Article')),
                ('fournisseur', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='gestion_achats.gacfournisseur', verbose_name='Fournisseur')),
            ],
            options={
                'verbose_name': 'Article-Fournisseur',
                'verbose_name_plural': 'Articles-Fournisseurs',
            },
        ),
        migrations.AddField(
            model_name='gacarticle',
            name='fournisseurs',
            field=models.ManyToManyField(related_name='articles', through='gestion_achats.GACArticleFournisseur', to='gestion_achats.gacfournisseur', verbose_name='Fournisseurs'),
        ),
        migrations.CreateModel(
            name='GACHistorique',
            fields=[
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='Identifiant unique')),
                ('object_id', models.UUIDField(verbose_name="ID de l'objet")),
                ('action', models.CharField(choices=[('CREATION', 'Création'), ('MODIFICATION', 'Modification'), ('SOUMISSION', 'Soumission'), ('VALIDATION_N1', 'Validation N1'), ('VALIDATION_N2', 'Validation N2'), ('REFUS', 'Refus'), ('ANNULATION', 'Annulation'), ('CONVERSION_BC', 'Conversion en BC'), ('EMISSION', 'Émission'), ('ENVOI', 'Envoi'), ('CONFIRMATION', 'Confirmation'), ('RECEPTION', 'Réception'), ('VALIDATION', 'Validation'), ('ENGAGEMENT', 'Engagement budgétaire'), ('COMMANDE', 'Commande budgétaire'), ('CONSOMMATION', 'Consommation budgétaire'), ('LIBERATION', 'Libération budgétaire')], max_length=50, verbose_name='Action')),
                ('date_action', models.DateTimeField(auto_now_add=True, verbose_name="Date de l'action")),
                ('details', models.TextField(blank=True, verbose_name='Détails')),
                ('ancien_statut', models.CharField(blank=True, max_length=50, verbose_name='Ancien statut')),
                ('nouveau_statut', models.CharField(blank=True, max_length=50, verbose_name='Nouveau statut')),
                ('donnees_avant', models.JSONField(blank=True, null=True, verbose_name='Données avant modification')),
                ('donnees_apres', models.JSONField(blank=True, null=True, verbose_name='Données après modification')),
                ('adresse_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='Adresse IP')),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype', verbose_name="Type d'objet")),
                ('utilisateur', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='historique_gac', to='employee.zy00', verbose_name='Utilisateur')),
            ],
            options={
                'verbose_name': 'Historique',
                'verbose_name_plural': 'Historiques',
                'ordering': ['-date_action'],
            },
        ),
        migrations.CreateModel(
            name='GACLigneBonCommande',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('quantite_commandee', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Quantité commandée')),
                ('quantite_recue', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, verbose_name='Quantité reçue')),
                ('prix_unitaire', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Prix unitaire HT')),
                ('taux_tva', models.DecimalField(decimal_places=2, default=Decimal('20.0'), max_digits=5, verbose_name='Taux TVA (%)')),
                ('montant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant HT')),
                ('montant_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TVA')),
                ('montant_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TTC')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('ordre', models.IntegerField(default=0, verbose_name='Ordre')),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='lignes_bc', to='gestion_achats.gacarticle', verbose_name='Article')),
                ('bon_commande', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='gestion_achats.gacboncommande', verbose_name='Bon de commande')),
            ],
            options={
                'verbose_name': 'Ligne de bon de commande',
                'verbose_name_plural': 'Lignes de bons de commande',
                'ordering': ['ordre', 'id'],
            },
        ),
        migrations.CreateModel(
            name='GACLigneDemandeAchat',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('quantite', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Quantité')),
                ('prix_unitaire', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Prix unitaire HT')),
                ('taux_tva', models.DecimalField(decimal_places=2, default=Decimal('20.0'), max_digits=5, verbose_name='Taux TVA (%)')),
                ('montant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant HT')),
                ('montant_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TVA')),
                ('montant_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TTC')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('ordre', models.IntegerField(default=0, verbose_name='Ordre')),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='lignes_demande', to='gestion_achats.gacarticle', verbose_name='Article')),
                ('demande_achat', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='gestion_achats.gacdemandeachat', verbose_name="Demande d'achat")),
            ],
            options={
                'verbose_name': "Ligne de demande d'achat",
                'verbose_name_plural': "Lignes de demandes d'achat",
                'ordering': ['ordre', 'id'],
            },
        ),
        migrations.CreateModel(
            name='GACLigneReception',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('quantite_recue', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Quantité reçue')),
                ('quantite_acceptee', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Quantité acceptée')),
                ('quantite_refusee', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Quantité refusée')),
                ('motif_refus', models.TextField(blank=True, verbose_name='Motif de refus')),
                ('conforme', models.BooleanField(default=True, verbose_name='Ligne conforme')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('commentaire_reception', models.TextField(blank=True, verbose_name='Commentaire de réception')),
                ('ligne_bon_commande', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='lignes_reception', to='gestion_achats.gacligneboncommande', verbose_name='Ligne bon de commande')),
            ],
            options={
                'verbose_name': 'Ligne de réception',
                'verbose_name_plural': 'Lignes de réception',
                'ordering': ['id'],
            },
        ),
        migrations.CreateModel(
            name='GACLigneBonRetour',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True, verbose_name='UUID')),
                ('quantite_retournee', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.01'))], verbose_name='Quantité retournée')),
                ('prix_unitaire', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0.00'))], verbose_name='Prix unitaire HT')),
                ('taux_tva', models.DecimalField(decimal_places=2, default=Decimal('20.0'), max_digits=5, verbose_name='Taux TVA (%)')),
                ('montant', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant HT')),
                ('montant_tva', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TVA')),
                ('montant_ttc', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=15, verbose_name='Montant TTC')),
                ('motif_retour', models.TextField(verbose_name='Motif du retour')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('ordre', models.IntegerField(default=0, verbose_name='Ordre')),
                ('article', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='lignes_retour', to='gestion_achats.gacarticle', verbose_name='Article')),
                ('bon_retour', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='gestion_achats.gacbonretour', verbose_name='Bon de retour')),
                ('ligne_reception', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='lignes_retour', to='gestion_achats.gaclignereception', verbose_name='Ligne de réception')),
            ],
            options={
                'verbose_name': 'Ligne de bon de retour',
                'verbose_name_plural': 'Lignes de bons de retour',
                'ordering': ['ordre', 'id'],
            },
        ),
        migrations.CreateModel(
            name='GACPieceJointe',
            fields=[
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='Identifiant unique')),
                ('object_id', models.UUIDField(verbose_name="ID de l'objet")),
                ('fichier', models.FileField(upload_to='gestion_achats/pieces_jointes/%Y/%m/', verbose_name='Fichier')),
                ('nom_fichier', models.CharField(max_length=255, verbose_name='Nom du fichier')),
                ('type_fichier', models.CharField(choices=[('DEVIS', 'Devis'), ('FACTURE', 'Facture'), ('BL', 'Bon de livraison'), ('CONTRAT', 'Contrat'), ('CAHIER_CHARGES', 'Cahier des charges'), ('AUTRE', 'Autre')], default='AUTRE', max_length=20, verbose_name='Type de fichier')),
                ('description', models.CharField(blank=True, max_length=500, verbose_name='Description')),
                ('taille_fichier', models.IntegerField(verbose_name='Taille du fichier (octets)')),
                ('date_ajout', models.DateTimeField(auto_now_add=True, verbose_name="Date d'ajout")),
                ('ajoute_par', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='pieces_jointes_gac', to='employee.zy00', verbose_name='Ajouté par')),
                ('content_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='contenttypes.contenttype', verbose_name="Type d'objet")),
            ],
            options={
                'verbose_name': 'Pièce jointe',
                'verbose_name_plural': 'Pièces jointes',
                'ordering': ['-date_ajout'],
            },
        ),
        migrations.CreateModel(
            name='GACReception',
            fields=[
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False, verbose_name='Identifiant unique')),
                ('numero', models.CharField(editable=False, max_length=30, unique=True, verbose_name='Numéro de réception')),
                ('date_reception', models.DateField(verbose_name='Date de réception')),
                ('statut', models.CharField(choices=[('BROUILLON', 'Brouillon'), ('VALIDEE', 'Validée'), ('ANNULEE', 'Annulée')], default='BROUILLON', max_length=20, verbose_name='Statut')),
                ('commentaire', models.TextField(blank=True, verbose_name='Commentaire')),
                ('bon_livraison_fournisseur', models.CharField(blank=True, max_length=50, verbose_name='N° bon de livraison fournisseur')),
                ('date_creation', models.DateTimeField(auto_now_add=True, verbose_name='Date de création')),
                ('date_modification', models.DateTimeField(auto_now=True, verbose_name='Date de modification')),
                ('date_validation', models.DateTimeField(blank=True, null=True, verbose_name='Date de validation')),
                ('conforme', models.BooleanField(default=True, verbose_name='Réception conforme')),
                ('motif_annulation', models.TextField(blank=True, verbose_name="Motif d'annulation")),
                ('date_annulation', models.DateTimeField(blank=True, null=True, verbose_name="Date d'annulation")),
                ('bon_commande', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='receptions', to='gestion_achats.gacboncommande', verbose_name='Bon de commande')),
                ('cree_par', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receptions_creees_gac', to='employee.zy00', verbose_name='Créé par')),
                ('receptionnaire', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='receptions_gac', to='employee.zy00', verbose_name='Réceptionnaire')),
                ('validateur', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receptions_validees_gac', to='employee.zy00', verbose_name='Validateur')),
            ],
            options={
                'verbose_name': 'Réception',
                'verbose_name_plural': 'Réceptions',
                'ordering': ['-date_creation'],
            },
        ),
        migrations.AddField(
            model_name='gaclignereception',
            name='reception',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lignes', to='gestion_achats.gacreception', verbose_name='Réception'),
        ),
        migrations.AddField(
            model_name='gacbonretour',
            name='reception',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='bons_retour', to='gestion_achats.gacreception', verbose_name='Réception concernée'),
        ),
        migrations.AddIndex(
            model_name='gacbudget',
            index=models.Index(fields=['code'], name='gestion_ach_code_eb0888_idx'),
        ),
        migrations.AddIndex(
            model_name='gacbudget',
            index=models.Index(fields=['exercice'], name='gestion_ach_exercic_5a0ea7_idx'),
        ),
        migrations.AddIndex(
            model_name='gacbudget',
            index=models.Index(fields=['gestionnaire'], name='gestion_ach_gestion_600409_idx'),
        ),
        migrations.AddIndex(
            model_name='gaccategorie',
            index=models.Index(fields=['code'], name='gestion_ach_code_b71185_idx'),
        ),
        migrations.AddIndex(
            model_name='gaccategorie',
            index=models.Index(fields=['parent'], name='gestion_ach_parent__b22ef6_idx'),
        ),
        migrations.AddIndex(
            model_name='gacdemandeachat',
            index=models.Index(fields=['numero'], name='gestion_ach_numero_1be3ab_idx'),
        ),
        migrations.AddIndex(
            model_name='gacdemandeachat',
            index=models.Index(fields=['demandeur'], name='gestion_ach_demande_e89df4_idx'),
        ),
        migrations.AddIndex(
            model_name='gacdemandeachat',
            index=models.Index(fields=['statut'], name='gestion_ach_statut_cc95b7_idx'),
        ),
        migrations.AddIndex(
            model_name='gacdemandeachat',
            index=models.Index(fields=['date_creation'], name='gestion_ach_date_cr_464be3_idx'),
        ),
        migrations.AddIndex(
            model_name='gacfournisseur',
            index=models.Index(fields=['code'], name='gestion_ach_code_76a9db_idx'),
        ),
        migrations.AddIndex(
            model_name='gacfournisseur',
            index=models.Index(fields=['siret'], name='gestion_ach_siret_dafd57_idx'),
        ),
        migrations.AddIndex(
            model_name='gacfournisseur',
            index=models.Index(fields=['statut'], name='gestion_ach_statut_f95883_idx'),
        ),
        migrations.AddIndex(
            model_name='gacboncommande',
            index=models.Index(fields=['numero'], name='gestion_ach_numero_fed1a3_idx'),
        ),
        migrations.AddIndex(
            model_name='gacboncommande',
            index=models.Index(fields=['fournisseur'], name='gestion_ach_fournis_ebb7f2_idx'),
        ),
        migrations.AddIndex(
            model_name='gacboncommande',
            index=models.Index(fields=['statut'], name='gestion_ach_statut_1245de_idx'),
        ),
        migrations.AddIndex(
            model_name='gacboncommande',
            index=models.Index(fields=['date_creation'], name='gestion_ach_date_cr_71d2ad_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='gacarticlefournisseur',
            unique_together={('article', 'fournisseur')},
        ),
        migrations.AddIndex(
            model_name='gacarticle',
            index=models.Index(fields=['reference'], name='gestion_ach_referen_5fc87f_idx'),
        ),
        migrations.AddIndex(
            model_name='gacarticle',
            index=models.Index(fields=['categorie'], name='gestion_ach_categor_321ee0_idx'),
        ),
        migrations.AddIndex(
            model_name='gacarticle',
            index=models.Index(fields=['statut'], name='gestion_ach_statut_8b0d3e_idx'),
        ),
        migrations.AddIndex(
            model_name='gachistorique',
            index=models.Index(fields=['content_type', 'object_id'], name='gestion_ach_content_fbd174_idx'),
        ),
        migrations.AddIndex(
            model_name='gachistorique',
            index=models.Index(fields=['action', 'date_action'], name='gestion_ach_action_d142d1_idx'),
        ),
        migrations.AddIndex(
            model_name='gachistorique',
            index=models.Index(fields=['utilisateur', 'date_action'], name='gestion_ach_utilisa_c5c677_idx'),
        ),
        migrations.AddIndex(
            model_name='gacpiecejointe',
            index=models.Index(fields=['content_type', 'object_id'], name='gestion_ach_content_f35baf_idx'),
        ),
        migrations.AddIndex(
            model_name='gacreception',
            index=models.Index(fields=['numero'], name='gestion_ach_numero_0532c9_idx'),
        ),
        migrations.AddIndex(
            model_name='gacreception',
            index=models.Index(fields=['bon_commande', 'statut'], name='gestion_ach_bon_com_7cea3c_idx'),
        ),
        migrations.AddIndex(
            model_name='gacreception',
            index=models.Index(fields=['date_reception'], name='gestion_ach_date_re_df6361_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='gaclignereception',
            unique_together={('reception', 'ligne_bon_commande')},
        ),
        migrations.AddIndex(
            model_name='gacbonretour',
            index=models.Index(fields=['numero'], name='gestion_ach_numero_63ce39_idx'),
        ),
        migrations.AddIndex(
            model_name='gacbonretour',
            index=models.Index(fields=['fournisseur', 'statut'], name='gestion_ach_fournis_9b7124_idx'),
        ),
        migrations.AddIndex(
            model_name='gacbonretour',
            index=models.Index(fields=['date_creation'], name='gestion_ach_date_cr_cf16bf_idx'),
        ),
    ]
