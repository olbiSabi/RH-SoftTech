{% load static %}
<!-- Contenu Onglet 1: Donn√©es Agent -->
<div class="tab-content {% if request.GET.tab == 'donnees' or not request.GET.tab %}active{% endif %}"
     id="donnees">
    <div class="form-section">
        <h3>Informations Personnelles</h3>
        <div class="form-grid">
            <div class="form-group">
                <label>Nom</label>
                {% if historique_actif %}
                <input type="text" value="{{ historique_actif.nom }}" readonly>
                <small class="text-muted">(Historique actif depuis {{ historique_actif.date_debut_validite|date:'d/m/Y' }})</small>
                {% else %}
                <input type="text" value="{{ employe.nom }}" readonly>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Pr√©nom(s)</label>
                {% if historique_actif %}
                <input type="text" value="{{ historique_actif.prenoms }}" readonly>
                <small class="text-muted">(Historique actif depuis {{ historique_actif.date_debut_validite|date:'d/m/Y' }})</small>
                {% else %}
                <input type="text" value="{{ employe.prenoms }}" readonly>
                {% endif %}
            </div>
            <div class="form-group">
                <label>Date de naissance</label>
                <input type="date" value="{{ employe.date_naissance|date:'Y-m-d' }}" readonly>
            </div>
            <div class="form-group">
                <label>Sexe</label>
                <input type="text" value="{{ employe.get_sexe_display }}" readonly>
            </div>
            <div class="form-group">
                <label>Lieu de naissance</label>
                <input type="text" value="{{ employe.ville_naissance }}" readonly>
            </div>
            <div class="form-group">
                <label>Pays de naissance</label>
                <input type="text" value="{{ employe.pays_naissance }}" readonly>
            </div>
            <div class="form-group">
                <label>Situation familiale</label>
                <input type="text" value="{{ employe.get_situation_familiale_display }}" readonly>
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3>Pi√®ce d'Identit√©</h3>
        <div class="form-grid">
            <div class="form-group">
                <label>Type d'identit√©</label>
                <input type="text" value="{{ employe.get_type_id_display }}" readonly>
            </div>
            <div class="form-group">
                <label>Num√©ro d'identit√©</label>
                <input type="text" value="{{ employe.numero_id }}" readonly>
            </div>
            <div class="form-group">
                <label>Date de validit√©</label>
                <input type="date" value="{{ employe.date_validite_id|date:'Y-m-d' }}" readonly>
            </div>
            <div class="form-group">
                <label>Date d'expiration</label>
                <input type="date" value="{{ employe.date_expiration_id|date:'Y-m-d' }}" readonly>
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3>Informations Administratives</h3>
        <div class="form-grid">
            <div class="form-group">
                <label>Type de dossier</label>
                <input type="text" value="{{ employe.get_type_dossier_display }}" readonly>
            </div>
            <div class="form-group">
                <label>Date de validation embauche</label>
                <input type="date"
                       value="{% if employe.date_validation_embauche %}{{ employe.date_validation_embauche|date:'Y-m-d' }}{% endif %}"
                       readonly>
            </div>
            <div class="form-group">
                <label>√âtat du dossier</label>
                <input type="text" value="{{ employe.get_etat_display }}" readonly>
            </div>
            <!-- NOUVEAU CHAMP : MANAGER -->
            <div class="form-group">
                <label>Manager responsable</label>
                {% with manager=employe.get_manager_responsable %}
                {% if manager %}
                <div class="manager-display">
                    <div class="d-flex align-items-center">
                        {% if manager.employe.photo %}
                        <img src="{{ manager.employe.photo.url }}" alt="Photo manager"
                             class="rounded-circle me-2" width="32" height="32">
                        {% else %}
                        <div class="bg-secondary rounded-circle me-2 d-flex align-items-center justify-content-center"
                             style="width: 32px; height: 32px;">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        {% endif %}
                        <div>
                            <strong>
                                {% if manager.employe.historique_actif %}
                                {{ manager.employe.historique_actif.nom }} {{ manager.employe.historique_actif.prenoms
                                }}
                                {% else %}
                                {{ manager.employe.nom }} {{ manager.employe.prenoms }}
                                {% endif %}
                            </strong>
                            <br>
                            <small class="text-muted">
                                {{ manager.departement.LIBELLE }}
                                (depuis le {{ manager.date_debut|date:"d/m/Y" }})
                            </small>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="text-muted">
                    <i class="fas fa-exclamation-circle me-1"></i>
                    Aucun manager d√©fini
                </div>
                {% endif %}
                {% endwith %}
            </div>
        </div>
    </div>
</div>

<!-- Contenu Onglet 2: Coordonn√©es -->
<div class="tab-content {% if request.GET.tab == 'coordonnees' %}active{% endif %}" id="coordonnees">

    <!-- Section Adresses -->
    <div class="form-section">
        <div class="section-header">
            <h3>Adresses</h3>
            <button type="button" class="btn btn-primary" id="addAdresseBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter une adresse</span>
            </button>
        </div>
        {% if adresses %}

        <!-- Vue Desktop (tableau) -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Adresse compl√®te</th>
                    <th>P√©riode</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for adresse in adresses %}
                <tr>
                    <td>{{ adresse.get_type_adresse_display }}</td>
                    <td>{{ adresse.rue }}, {{ adresse.code_postal }} {{ adresse.ville }}, {{ adresse.pays }}</td>
                    <td>
                        Du {{ adresse.date_debut|date:"d/m/Y" }}
                        {% if adresse.date_fin %}
                        au {{ adresse.date_fin|date:"d/m/Y" }}
                        {% else %}
                        - En cours
                        {% endif %}
                    </td>
                    <td>
                        {% if adresse.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-adresse-btn"
                                    data-id="{{ adresse.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-adresse-btn"
                                    data-id="{{ adresse.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile (cartes) -->
        <div class="mobile-view">
            {% for adresse in adresses %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type">{{ adresse.get_type_adresse_display }}</span>
                    {% if adresse.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>{{ adresse.rue }}, {{ adresse.code_postal }} {{ adresse.ville }}, {{ adresse.pays }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar"></i>
                        <span>
                            Du {{ adresse.date_debut|date:"d/m/Y" }}
                            {% if adresse.date_fin %}
                            au {{ adresse.date_fin|date:"d/m/Y" }}
                            {% else %}
                            - En cours
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-adresse-btn"
                            data-id="{{ adresse.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-adresse-btn"
                            data-id="{{ adresse.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucune adresse enregistr√©e</p>
        {% endif %}
    </div>

    <!-- Section T√©l√©phones -->
    <div class="form-section">
        <div class="section-header">
            <h3>T√©l√©phones</h3>
            <button type="button" class="btn btn-primary" id="addTelephoneBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un t√©l√©phone</span>
            </button>
        </div>
        {% if telephones %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Num√©ro</th>
                    <th>P√©riode de validit√©</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for tel in telephones %}
                <tr>
                    <td>{{ tel.numero }}</td>
                    <td>
                        Du {{ tel.date_debut_validite|date:"d/m/Y" }}
                        {% if tel.date_fin_validite %}
                        au {{ tel.date_fin_validite|date:"d/m/Y" }}
                        {% else %}
                        - En cours
                        {% endif %}
                    </td>
                    <td>
                        {% if tel.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-telephone-btn"
                                    data-id="{{ tel.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-telephone-btn"
                                    data-id="{{ tel.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for tel in telephones %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-phone"></i> {{ tel.numero }}</span>
                    {% if tel.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar"></i>
                        <span>
                            Du {{ tel.date_debut_validite|date:"d/m/Y" }}
                            {% if tel.date_fin_validite %}
                            au {{ tel.date_fin_validite|date:"d/m/Y" }}
                            {% else %}
                            - En cours
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-telephone-btn"
                            data-id="{{ tel.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-telephone-btn"
                            data-id="{{ tel.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucun t√©l√©phone enregistr√©</p>
        {% endif %}
    </div>

    <!-- Section Emails -->
    <div class="form-section">
        <div class="section-header">
            <h3>Emails</h3>
            <button type="button" class="btn btn-primary" id="addEmailBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un email</span>
            </button>
        </div>
        {% if emails %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Email</th>
                    <th>P√©riode de validit√©</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for email in emails %}
                <tr>
                    <td>{{ email.email }}</td>
                    <td>
                        Du {{ email.date_debut_validite|date:"d/m/Y" }}
                        {% if email.date_fin_validite %}
                        au {{ email.date_fin_validite|date:"d/m/Y" }}
                        {% else %}
                        - En cours
                        {% endif %}
                    </td>
                    <td>
                        {% if email.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-email-btn"
                                    data-id="{{ email.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-email-btn"
                                    data-id="{{ email.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for email in emails %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-envelope"></i> {{ email.email }}</span>
                    {% if email.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar"></i>
                        <span>
                            Du {{ email.date_debut_validite|date:"d/m/Y" }}
                            {% if email.date_fin_validite %}
                            au {{ email.date_fin_validite|date:"d/m/Y" }}
                            {% else %}
                            - En cours
                            {% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-email-btn"
                            data-id="{{ email.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-email-btn"
                            data-id="{{ email.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucun email enregistr√©</p>
        {% endif %}
    </div>

    <!-- Section Identit√© Bancaire -->
    <div class="form-section">
        <div class="section-header">
            <h3><i class="fas fa-university"></i> Identit√© Bancaire (RIB)</h3>
            {% if has_identite_bancaire %}
            <button type="button" class="btn btn-warning" id="editIdentiteBancaireBtn">
                <i class="fas fa-edit"></i> <span class="btn-text">Modifier</span>
            </button>
            {% else %}
            <button type="button" class="btn btn-primary" id="addIdentiteBancaireBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter RIB</span>
            </button>
            {% endif %}
        </div>

        {% if has_identite_bancaire %}
        <!-- Vue Desktop -->
        <div class="desktop-view">
            <div class="rib-display-card">
                <div class="rib-section">
                    <h4><i class="fas fa-user-circle"></i> Titulaire</h4>
                    <div class="rib-info-grid">
                        <div class="rib-info-item">
                            <span class="rib-label">Titulaire du compte :</span>
                            <span class="rib-value">{{ identite_bancaire.titulaire_compte }}</span>
                        </div>
                        <div class="rib-info-item">
                            <span class="rib-label">Type de compte :</span>
                            <span class="rib-value">{{ identite_bancaire.get_type_compte_display }}</span>
                        </div>
                    </div>
                </div>

                <div class="rib-section">
                    <h4><i class="fas fa-building"></i> Banque</h4>
                    <div class="rib-info-grid">
                        <div class="rib-info-item">
                            <span class="rib-label">Nom de la banque :</span>
                            <span class="rib-value">{{ identite_bancaire.nom_banque }}</span>
                        </div>
                        {% if identite_bancaire.domiciliation %}
                        <div class="rib-info-item">
                            <span class="rib-label">Domiciliation :</span>
                            <span class="rib-value">{{ identite_bancaire.domiciliation }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div class="rib-section rib-highlight">
                    <h4><i class="fas fa-credit-card"></i> RIB</h4>
                    <div class="rib-numbers">
                        <div class="rib-number-block">
                            <span class="rib-number-label">Code Banque</span>
                            <span class="rib-number-value">{{ identite_bancaire.code_banque }}</span>
                        </div>
                        <div class="rib-number-block">
                            <span class="rib-number-label">Code Guichet</span>
                            <span class="rib-number-value">{{ identite_bancaire.code_guichet }}</span>
                        </div>
                        <div class="rib-number-block">
                            <span class="rib-number-label">Num√©ro de Compte</span>
                            <span class="rib-number-value">{{ identite_bancaire.numero_compte }}</span>
                        </div>
                        <div class="rib-number-block">
                            <span class="rib-number-label">Cl√© RIB</span>
                            <span class="rib-number-value">{{ identite_bancaire.cle_rib }}</span>
                        </div>
                    </div>
                    <div class="rib-complet">
                        <strong>RIB Complet :</strong> {{ identite_bancaire.get_rib }}
                    </div>
                </div>

                {% if identite_bancaire.iban %}
                <div class="rib-section">
                    <h4><i class="fas fa-globe"></i> IBAN / BIC</h4>
                    <div class="rib-info-grid">
                        <div class="rib-info-item iban-item">
                            <span class="rib-label">IBAN :</span>
                            <span class="rib-value iban-value">{{ identite_bancaire.get_iban_formate }}</span>
                        </div>
                        {% if identite_bancaire.bic %}
                        <div class="rib-info-item">
                            <span class="rib-label">BIC/SWIFT :</span>
                            <span class="rib-value">{{ identite_bancaire.bic }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endif %}

                {% if identite_bancaire.remarques %}
                <div class="rib-section">
                    <h4><i class="fas fa-comment"></i> Remarques</h4>
                    <p class="rib-remarques">{{ identite_bancaire.remarques }}</p>
                </div>
                {% endif %}

                <div class="rib-footer">
                    <div class="rib-status">
                        {% if identite_bancaire.actif %}
                        <span class="badge badge-success"><i class="fas fa-check-circle"></i> Actif</span>
                        {% else %}
                        <span class="badge badge-danger"><i class="fas fa-times-circle"></i> Inactif</span>
                        {% endif %}
                    </div>
                    <div class="rib-actions">
                        <button type="button" class="btn btn-danger btn-sm" id="deleteIdentiteBancaireBtn">
                            <i class="fas fa-trash"></i> Supprimer
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            <div class="mobile-card rib-mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-university"></i> {{ identite_bancaire.nom_banque }}</span>
                    {% if identite_bancaire.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-user-circle"></i>
                        <span><strong>Titulaire :</strong> {{ identite_bancaire.titulaire_compte }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-tag"></i>
                        <span><strong>Type :</strong> {{ identite_bancaire.get_type_compte_display }}</span>
                    </div>
                    <div class="mobile-card-section">
                        <strong><i class="fas fa-credit-card"></i> RIB</strong>
                        <div class="rib-mobile-numbers">
                            <div>Code Banque: <strong>{{ identite_bancaire.code_banque }}</strong></div>
                            <div>Code Guichet: <strong>{{ identite_bancaire.code_guichet }}</strong></div>
                            <div>N¬∞ Compte: <strong>{{ identite_bancaire.numero_compte }}</strong></div>
                            <div>Cl√©: <strong>{{ identite_bancaire.cle_rib }}</strong></div>
                        </div>
                    </div>
                    {% if identite_bancaire.iban %}
                    <div class="mobile-card-row">
                        <i class="fas fa-globe"></i>
                        <span><strong>IBAN :</strong> {{ identite_bancaire.get_iban_formate }}</span>
                    </div>
                    {% endif %}
                    {% if identite_bancaire.bic %}
                    <div class="mobile-card-row">
                        <i class="fas fa-barcode"></i>
                        <span><strong>BIC :</strong> {{ identite_bancaire.bic }}</span>
                    </div>
                    {% endif %}
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm" id="editIdentiteBancaireMobileBtn">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm" id="deleteIdentiteBancaireMobileBtn">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
        </div>

        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon"><i class="fas fa-university"></i></div>
            <h3>Aucune identit√© bancaire enregistr√©e</h3>
            <p>Ajoutez les coordonn√©es bancaires de l'employ√© pour faciliter les virements de salaire.</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- Contenu Onglet 3: Contrats & Affectations -->
<div class="tab-content {% if request.GET.tab == 'contrats' %}active{% endif %}" id="contrats">

    <!-- Section Contrats -->
    <div class="form-section">
        <div class="section-header">
            <h3>Contrats</h3>
            <button type="button" class="btn btn-primary" id="addContratBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un contrat</span>
            </button>
        </div>
        {% if contrats %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Type de contrat</th>
                    <th>Date de d√©but</th>
                    <th>Date de fin</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for contrat in contrats %}
                <tr>
                    <td>{{ contrat.get_type_contrat_display }}</td>
                    <td>{{ contrat.date_debut|date:"d/m/Y" }}</td>
                    <td>
                        {% if contrat.date_fin %}
                        {{ contrat.date_fin|date:"d/m/Y" }}
                        {% else %}
                        En cours
                        {% endif %}
                    </td>
                    <td>
                        {% if contrat.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-contrat-btn"
                                    data-id="{{ contrat.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-contrat-btn"
                                    data-id="{{ contrat.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for contrat in contrats %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-file-contract"></i> {{ contrat.get_type_contrat_display }}</span>
                    {% if contrat.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-check"></i>
                        <span>D√©but: {{ contrat.date_debut|date:"d/m/Y" }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-times"></i>
                        <span>
                            Fin: {% if contrat.date_fin %}{{ contrat.date_fin|date:"d/m/Y" }}{% else %}En cours{% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-contrat-btn"
                            data-id="{{ contrat.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-contrat-btn"
                            data-id="{{ contrat.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucun contrat enregistr√©</p>
        {% endif %}
    </div>

    <!-- Section Affectations -->
    <div class="form-section">
        <div class="section-header">
            <h3>Affectations</h3>
            <button type="button" class="btn btn-primary" id="addAffectationBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter une affectation</span>
            </button>
        </div>
        {% if affectations %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Poste</th>
                    <th>D√©partement</th>
                    <th>Date de d√©but</th>
                    <th>Date de fin</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for affectation in affectations %}
                <tr>
                    <td>{{ affectation.poste.LIBELLE }}</td>
                    <td>{{ affectation.poste.DEPARTEMENT.LIBELLE }}</td>
                    <td>{{ affectation.date_debut|date:"d/m/Y" }}</td>
                    <td>
                        {% if affectation.date_fin %}
                        {{ affectation.date_fin|date:"d/m/Y" }}
                        {% else %}
                        En cours
                        {% endif %}
                    </td>
                    <td>
                        {% if affectation.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-affectation-btn"
                                    data-id="{{ affectation.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-affectation-btn"
                                    data-id="{{ affectation.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for affectation in affectations %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i
                            class="fas fa-briefcase"></i> {{ affectation.poste.LIBELLE }}</span>
                    {% if affectation.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-building"></i>
                        <span>{{ affectation.poste.DEPARTEMENT.LIBELLE }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-check"></i>
                        <span>D√©but: {{ affectation.date_debut|date:"d/m/Y" }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-times"></i>
                        <span>
                            Fin: {% if affectation.date_fin %}{{ affectation.date_fin|date:"d/m/Y" }}{% else %}En cours{% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-affectation-btn"
                            data-id="{{ affectation.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-affectation-btn"
                            data-id="{{ affectation.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucune affectation enregistr√©e</p>
        {% endif %}
    </div>
</div>

<!-- Contenu Onglet 4: Famille -->
<div class="tab-content {% if request.GET.tab == 'famille' %}active{% endif %}" id="famille">

    <!-- Section Historique des noms et pr√©noms -->
    <div class="form-section">
        <div class="section-header">
            <h3>üìù Historique des noms et pr√©noms</h3>
            <button type="button" class="btn btn-primary" id="addZNPBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un historique</span>
            </button>
        </div>

        {% if historique_noms_prenoms %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Nom</th>
                    <th>Pr√©nom(s)</th>
                    <th>Date d√©but validit√©</th>
                    <th>Date fin validit√©</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for historique in historique_noms_prenoms %}
                <tr>
                    <td>{{ historique.nom }}</td>
                    <td>{{ historique.prenoms }}</td>
                    <td>{{ historique.date_debut_validite|date:"d/m/Y" }}</td>
                    <td>
                        {% if historique.date_fin_validite %}
                        {{ historique.date_fin_validite|date:"d/m/Y" }}
                        {% else %}
                        -
                        {% endif %}
                    </td>
                    <td>
                        {% if historique.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-znp-btn"
                                    data-id="{{ historique.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-znp-btn"
                                    data-id="{{ historique.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for historique in historique_noms_prenoms %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-user-tag"></i> {{ historique.nom }} {{ historique.prenoms }}</span>
                    {% if historique.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-check"></i>
                        <span>D√©but: {{ historique.date_debut_validite|date:"d/m/Y" }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-times"></i>
                        <span>
                            Fin: {% if historique.date_fin_validite %}{{ historique.date_fin_validite|date:"d/m/Y" }}{% else %}-{% endif %}
                        </span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-znp-btn"
                            data-id="{{ historique.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-znp-btn"
                            data-id="{{ historique.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucun historique de nom/pr√©nom enregistr√©</p>
        {% endif %}
    </div>

    <!-- Section Personnes √† charge -->
    <div class="form-section">
        <div class="section-header">
            <h3>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Personnes √† charge</h3>
            <button type="button" class="btn btn-primary" id="addFamilleBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter une personne √† charge</span>
            </button>
        </div>

        {% if employe.personnes_charge.all %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Type</th>
                    <th>Nom</th>
                    <th>Pr√©nom</th>
                    <th>Sexe</th>
                    <th>Date de naissance</th>
                    <th>D√©but prise en charge</th>
                    <th>Fin prise en charge</th>
                    <th>Statut</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for personne in employe.personnes_charge.all %}
                <tr>
                    <td>
                        {% if personne.personne_charge == 'ENFANT' %}üë∂
                        {% elif personne.personne_charge == 'CONJOINT' %}üíë
                        {% elif personne.personne_charge == 'PARENT' %}üëµ
                        {% else %}üë§{% endif %}
                        {{ personne.get_personne_charge_display }}
                    </td>
                    <td>{{ personne.nom }}</td>
                    <td>{{ personne.prenom }}</td>
                    <td>{{ personne.get_sexe_display }}</td>
                    <td>{{ personne.date_naissance|date:"d/m/Y" }}</td>
                    <td>{{ personne.date_debut_prise_charge|date:"d/m/Y" }}</td>
                    <td>
                        {% if personne.date_fin_prise_charge %}
                        {{ personne.date_fin_prise_charge|date:"d/m/Y" }}
                        {% else %}
                        -
                        {% endif %}
                    </td>
                    <td>
                        {% if personne.actif %}
                        <span class="badge badge-success">Actif</span>
                        {% else %}
                        <span class="badge badge-danger">Inactif</span>
                        {% endif %}
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-warning btn-sm edit-famille-btn"
                                    data-id="{{ personne.id }}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-famille-btn"
                                    data-id="{{ personne.id }}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for personne in employe.personnes_charge.all %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type">
                        {% if personne.personne_charge == 'ENFANT' %}üë∂
                        {% elif personne.personne_charge == 'CONJOINT' %}üíë
                        {% elif personne.personne_charge == 'PARENT' %}üëµ
                        {% else %}üë§{% endif %}
                        {{ personne.nom }} {{ personne.prenom }}
                    </span>
                    {% if personne.actif %}
                    <span class="badge badge-success">Actif</span>
                    {% else %}
                    <span class="badge badge-danger">Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-user-tag"></i>
                        <span>{{ personne.get_personne_charge_display }} - {{ personne.get_sexe_display }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-birthday-cake"></i>
                        <span>N√©(e) le {{ personne.date_naissance|date:"d/m/Y" }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-check"></i>
                        <span>Prise en charge: {{ personne.date_debut_prise_charge|date:"d/m/Y" }}</span>
                    </div>
                    {% if personne.date_fin_prise_charge %}
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar-times"></i>
                        <span>Fin: {{ personne.date_fin_prise_charge|date:"d/m/Y" }}</span>
                    </div>
                    {% endif %}
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-warning btn-sm edit-famille-btn"
                            data-id="{{ personne.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-famille-btn"
                            data-id="{{ personne.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <p style="color: #999; text-align: center; padding: 20px;">Aucune personne √† charge enregistr√©e</p>
        {% endif %}
    </div>

    <!-- Statistiques Famille -->
    <div class="form-section">
        <div class="section-header">
            <h3>R√©capitulatif</h3>
        </div>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">{{ nb_total }}</div>
                <div class="stat-label">Total Personnes</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ nb_enfants }}</div>
                <div class="stat-label">Enfants</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ nb_conjoints }}</div>
                <div class="stat-label">Conjoints</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ nb_actifs }}</div>
                <div class="stat-label">Actifs</div>
            </div>
        </div>
    </div>

    <!-- Section Personnes √† pr√©venir en cas d'urgence -->
    <div class="form-section">
        <div class="section-header">
            <h3>üö® Personnes √† pr√©venir en cas d'urgence</h3>
            <button type="button" class="btn btn-primary" id="addPersonnePrevBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un contact d'urgence</span>
            </button>
        </div>

        {% if personnes_prevenir %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Priorit√©</th>
                    <th>Nom</th>
                    <th>Pr√©nom</th>
                    <th>Lien de parent√©</th>
                    <th>T√©l√©phone principal</th>
                    <!--<th>T√©l√©phone secondaire</th>-->
                    <th>Email</th>
                    <!--<th>P√©riode</th>
                    <th>Statut</th>-->
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for personne in personnes_prevenir %}
                <tr>
                    <td>
                        {% if personne.ordre_priorite == 1 %}
                        <span class="badge badge-danger">üî¥ {{ personne.get_ordre_priorite_display }}</span>
                        {% elif personne.ordre_priorite == 2 %}
                        <span class="badge badge-warning">üü† {{ personne.get_ordre_priorite_display }}</span>
                        {% else %}
                        <span class="badge badge-info">üü° {{ personne.get_ordre_priorite_display }}</span>
                        {% endif %}
                    </td>
                    <td>{{ personne.nom }}</td>
                    <td>{{ personne.prenom }}</td>
                    <td>
                        {% if personne.lien_parente == 'CONJOINT' %}üíë
                        {% elif personne.lien_parente == 'PARENT' %}üë®‚Äçüë©‚Äçüë¶
                        {% elif personne.lien_parente == 'ENFANT' %}üë∂
                        {% elif personne.lien_parente == 'FRERE_SOEUR' %}üë´
                        {% elif personne.lien_parente == 'AMI' %}ü§ù
                        {% elif personne.lien_parente == 'COLLEGUE' %}üíº
                        {% elif personne.lien_parente == 'VOISIN' %}üè†
                        {% else %}üë§{% endif %}
                        {{ personne.get_lien_parente_display }}
                    </td>
                    <td>
                        <a href="tel:{{ personne.telephone_principal }}" class="phone-link">
                            <i class="fas fa-phone"></i> {{ personne.telephone_principal }}
                        </a>
                    </td>
                    <!--<td>
                        {% if personne.telephone_secondaire %}
                        <a href="tel:{{ personne.telephone_secondaire }}" class="phone-link">
                            <i class="fas fa-mobile-alt"></i> {{ personne.telephone_secondaire }}
                        </a>
                        {% else %}
                        -
                        {% endif %}
                    </td>-->
                    <td>
                        {% if personne.email %}
                        <a href="mailto:{{ personne.email }}" class="email-link">
                            <i class="fas fa-envelope"></i> {{ personne.email }}
                        </a>
                        {% else %}
                        -
                        {% endif %}
                    </td>
                    <!--<td>
                        <small>
                            Du {{ personne.date_debut_validite|date:"d/m/Y" }}<br>
                            {% if personne.date_fin_validite %}
                            au {{ personne.date_fin_validite|date:"d/m/Y" }}
                            {% else %}
                            √† aujourd'hui
                            {% endif %}
                        </small>
                    </td>
                    <td>
                        {% if personne.actif and not personne.date_fin_validite %}
                        <span class="badge badge-success">‚úÖ Actif</span>
                        {% else %}
                        <span class="badge badge-secondary">‚èπÔ∏è Inactif</span>
                        {% endif %}
                    </td>-->
                    <td>
                        <div class="action-buttons">
                            <button type="button" class="btn btn-info btn-sm view-personne-prev-btn"
                                    data-id="{{ personne.id }}"
                                    title="Voir d√©tails">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button type="button" class="btn btn-warning btn-sm edit-personne-prev-btn"
                                    data-id="{{ personne.id }}"
                                    title="Modifier">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger btn-sm delete-personne-prev-btn"
                                    data-id="{{ personne.id }}"
                                    title="Supprimer">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for personne in personnes_prevenir %}
            <div class="mobile-card urgent-contact-card">
                <div class="mobile-card-header">
                <span class="mobile-card-type">
                    {% if personne.ordre_priorite == 1 %}üî¥
                    {% elif personne.ordre_priorite == 2 %}üü†
                    {% else %}üü°{% endif %}
                    {{ personne.nom }} {{ personne.prenom }}
                </span>
                    {% if personne.actif and not personne.date_fin_validite %}
                    <span class="badge badge-success">‚úÖ Actif</span>
                    {% else %}
                    <span class="badge badge-secondary">‚èπÔ∏è Inactif</span>
                    {% endif %}
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-award"></i>
                        <span><strong>{{ personne.get_ordre_priorite_display }}</strong></span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-users"></i>
                        <span>{{ personne.get_lien_parente_display }}</span>
                    </div>
                    <div class="mobile-card-row">
                        <i class="fas fa-phone"></i>
                        <a href="tel:{{ personne.telephone_principal }}" class="phone-link">
                            {{ personne.telephone_principal }}
                        </a>
                    </div>
                    {% if personne.telephone_secondaire %}
                    <div class="mobile-card-row">
                        <i class="fas fa-mobile-alt"></i>
                        <a href="tel:{{ personne.telephone_secondaire }}" class="phone-link">
                            {{ personne.telephone_secondaire }}
                        </a>
                    </div>
                    {% endif %}
                    {% if personne.email %}
                    <div class="mobile-card-row">
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:{{ personne.email }}" class="email-link">
                            {{ personne.email }}
                        </a>
                    </div>
                    {% endif %}
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar"></i>
                        <span>
                        Du {{ personne.date_debut_validite|date:"d/m/Y" }}
                        {% if personne.date_fin_validite %}
                        au {{ personne.date_fin_validite|date:"d/m/Y" }}
                        {% else %}
                        √† aujourd'hui
                        {% endif %}
                    </span>
                    </div>
                    {% if personne.remarques %}
                    <div class="mobile-card-row">
                        <i class="fas fa-comment"></i>
                        <span>{{ personne.remarques|truncatewords:10 }}</span>
                    </div>
                    {% endif %}
                </div>
                <div class="mobile-card-actions">
                    <button type="button" class="btn btn-info btn-sm view-personne-prev-btn"
                            data-id="{{ personne.id }}">
                        <i class="fas fa-eye"></i> D√©tails
                    </button>
                    <button type="button" class="btn btn-warning btn-sm edit-personne-prev-btn"
                            data-id="{{ personne.id }}">
                        <i class="fas fa-edit"></i> Modifier
                    </button>
                    <button type="button" class="btn btn-danger btn-sm delete-personne-prev-btn"
                            data-id="{{ personne.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üö®</div>
            <h3>Aucun contact d'urgence enregistr√©</h3>
            <p>Ajoutez des personnes √† contacter en cas d'urgence pour cet employ√©.</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- Contenu Onglet 5: Documents -->
<div class="tab-content {% if request.GET.tab == 'documents' %}active{% endif %}" id="documents">
    <div class="form-section">
        <div class="section-header">
            <h3>Documents de l'employ√©</h3>
            <button type="button" class="btn btn-primary" id="addDocumentBtn">
                <i class="fas fa-plus"></i> <span class="btn-text">Ajouter un document</span>
            </button>
        </div>

        {% if documents %}

        <!-- Vue Desktop -->
        <div class="desktop-view">
            <table class="data-table">
                <thead>
                <tr>
                    <th>Type de document</th>
                    <th>Nom du document</th>
                    <th>Description</th>
                    <th>Date d'ajout</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {% for doc in documents %}
                <tr>
                    <td>{{ doc.type_document }}</td>
                    <td class="filename-cell">
                        <span class="filename">{{ doc.fichier.name|truncatechars:30 }}</span>
                    </td>
                    <td class="description-cell">
                        {% if doc.description %}
                        <small>{{ doc.description|truncatewords:10 }}</small>
                        {% else %}
                        <small class="text-muted">---</small>
                        {% endif %}
                    </td>
                    <td>{{ doc.date_ajout|date:"d/m/Y H:i" }}</td>
                    <td>
                        <div class="action-buttons">
                            <a href="{{ doc.fichier.url }}" target="_blank" class="btn btn-primary btn-sm"
                               title="T√©l√©charger">
                                <i class="fas fa-download"></i>
                            </a>
                            <button type="button" class="btn btn-danger btn-sm delete-document-btn"
                                    data-id="{{ doc.id }}" title="Supprimer">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Vue Mobile -->
        <div class="mobile-view">
            {% for doc in documents %}
            <div class="mobile-card">
                <div class="mobile-card-header">
                    <span class="mobile-card-type"><i class="fas fa-file-alt"></i> {{ doc.type_document }}</span>
                </div>
                <div class="mobile-card-body">
                    <div class="mobile-card-row">
                        <i class="fas fa-file"></i>
                        <span class="filename-mobile">{{ doc.fichier.name|truncatechars:40 }}</span>
                    </div>
                    {% if doc.description %}
                    <div class="mobile-card-row">
                        <i class="fas fa-info-circle"></i>
                        <span>{{ doc.description|truncatewords:15 }}</span>
                    </div>
                    {% endif %}
                    <div class="mobile-card-row">
                        <i class="fas fa-calendar"></i>
                        <span>{{ doc.date_ajout|date:"d/m/Y H:i" }}</span>
                    </div>
                </div>
                <div class="mobile-card-actions">
                    <a href="{{ doc.fichier.url }}" target="_blank" class="btn btn-primary btn-sm">
                        <i class="fas fa-download"></i> T√©l√©charger
                    </a>
                    <button type="button" class="btn btn-danger btn-sm delete-document-btn"
                            data-id="{{ doc.id }}">
                        <i class="fas fa-trash"></i> Supprimer
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>

        {% else %}
        <div class="empty-state">
            <i class="fas fa-file-alt empty-icon"></i>
            <p>Aucun document enregistr√©</p>
        </div>
        {% endif %}
    </div>
</div>