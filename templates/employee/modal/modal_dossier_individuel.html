 {% load static %}
<!-- Modale Adresse -->
<div id="adresseModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="adresseModalTitle">Ajouter une adresse</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="adresseForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <select id="type_adresse" name="type_adresse" required>  <!-- ‚Üê type_adresse sans 's' -->
                        <option value="">S√©lectionner...</option>
                        <option value="PRINCIPALE">Principale</option>
                        <option value="SECONDAIRE">Secondaire</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="rue" class="required">Rue</label>
                    <input type="text" id="rue" name="rue" required>
                </div>
                <div class="modal-form-group">
                    <label for="complement">Compl√©ment d'adresse</label>
                    <input type="text" id="complement" name="complement">
                </div>
                <div class="modal-form-group">
                    <label for="code_postal" class="required">Code postal</label>
                    <input type="text" id="code_postal" name="code_postal" required>
                </div>
                <div class="modal-form-group">
                    <label for="ville" class="required">Ville</label>
                    <input type="text" id="ville" name="ville" required>
                </div>
                <div class="modal-form-group">
                    {% include 'employee/modal/pays.html' %}
                </div>
                <div class="modal-form-group">
                    <label for="date_debut" class="required">Date de d√©but</label>
                    <input type="date" id="date_debut" name="date_debut" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin">Date de fin</label>
                    <input type="date" id="date_fin" name="date_fin">
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif" name="actif" checked>
                        Adresse active
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="adresseSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

<!-- Modale T√©l√©phone -->
<div id="telephoneModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="telephoneModalTitle">Ajouter un t√©l√©phone</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="telephoneForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="numero" class="required">Num√©ro de t√©l√©phone</label>
                    <input type="tel" id="numero" name="numero" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_debut_validite_tel" class="required">Date de d√©but de validit√©</label>
                    <input type="date" id="date_debut_validite_tel" name="date_debut_validite" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin_validite_tel">Date de fin de validit√©</label>
                    <input type="date" id="date_fin_validite_tel" name="date_fin_validite">
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif_tel" name="actif" checked>
                        T√©l√©phone actif
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="telephoneSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

<!-- Modale Email -->
<div id="emailModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="emailModalTitle">Ajouter un email</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="emailForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="email" class="required">Adresse email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_debut_validite_email" class="required">Date de d√©but de validit√©</label>
                    <input type="date" id="date_debut_validite_email" name="date_debut_validite" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin_validite_email">Date de fin de validit√©</label>
                    <input type="date" id="date_fin_validite_email" name="date_fin_validite">
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif_email" name="actif" checked>
                        Email actif
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="emailSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

<!-- Modale Document -->
<div id="documentModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="documentModalTitle">Ajouter un document</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="documentForm" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="type_document" class="required">Type de document</label>
                    <select id="type_document" name="type_document" required>
                        <option value="">-- S√©lectionner --</option>
                            <option value="CV">CV</option>
                            <option value="LETTRE_MOTIVATION">Lettre de motivation</option>
                            <option value="DIPLOME">Dipl√¥me</option>
                            <option value="ATTESTATION_FORMATION">Attestation de formation</option>
                            <option value="CERTIFICAT_TRAVAIL">Certificat de travail</option>
                            <option value="LETTRE_RECOMMANDATION">Lettre de recommandation</option>
                            <option value="CNI">Carte Nationale d\'Identit√©</option>
                            <option value="PASSEPORT">Passeport</option>
                            <option value="ACTE_NAISSANCE">Acte de naissance</option>
                            <option value="CERTIFICAT_RESIDENCE">Certificat de r√©sidence</option>
                            <option value="RIB">RIB</option>
                            <option value="ATTESTATION_SECURITE_SOCIALE">Attestation s√©curit√© sociale</option>
                            <option value="CERTIFICAT_MEDICAL">Certificat m√©dical</option>
                            <option value="CONTRAT_SIGNE">Contrat sign√©</option>
                            <option value="ATTESTATION_ASSURANCE">Attestation d\'assurance</option>
                            <option value="JUSTIFICATIF_DOMICILE">Justificatif de domicile</option>
                            <option value="PHOTO_IDENTITE">Photo d\'identit√©</option>
                            <option value="AUTRES">Autres</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="fichier" class="required">Fichier</label>
                    <input type="file" id="fichier" name="fichier" required>
                </div>
                <div class="modal-form-group">
                    <label for="description">Description</label>
                    <textarea id="description" name="description" rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary">Ajouter</button>
            </div>
        </form>
    </div>
</div>

<!-- Modale de confirmation de suppression -->
<div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
        <div class="modal-header">
            <h2>Confirmer la suppression</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <div class="modal-body">
            <p>√ätes-vous s√ªr de vouloir supprimer cet √©l√©ment ? Cette action est irr√©versible.</p>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Supprimer</button>
        </div>
    </div>
</div>

<!-- Overlay de chargement -->
<div id="loadingOverlay" class="loading-overlay">
    <div class="spinner"></div>
</div>

<!-- Modale Contrat -->
<div id="contratModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="contratModalTitle">Ajouter un contrat</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="contratForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="type_contrat" class="required">Type de contrat</label>
                    <select id="type_contrat" name="type_contrat" required>
                        <option value="">S√©lectionner...</option>
                        <option value="CDI">CDI - Contrat √† Dur√©e Ind√©termin√©e</option>
                        <option value="CDD">CDD - Contrat √† Dur√©e D√©termin√©e</option>
                        <option value="Stage">Stage</option>
                        <option value="Alternance">Alternance</option>
                        <option value="Prestation">Prestation de service</option>
                        <option value="Interim">Int√©rim</option>
                        <option value="Apprentissage">Apprentissage</option>
                        <option value="Contractuelle">Contractuelle</option>
                        <option value="Vacataire">Vacataire</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="date_debut_contrat" class="required">Date de d√©but</label>
                    <input type="date" id="date_debut_contrat" name="date_debut" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin_contrat">Date de fin</label>
                    <input type="date" id="date_fin_contrat" name="date_fin">
                    <small style="color: #666; font-size: 12px;">
                        Laisser vide pour un contrat sans date de fin (ex: CDI)
                    </small>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif_contrat" name="actif" checked>
                        Contrat actif
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="contratSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

<!-- Modale Affectation -->
<div id="affectationModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="affectationModalTitle">Ajouter une affectation</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="affectationForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="departement" class="required">D√©partement</label>
                    <select id="departement" name="departement" required>
                        <option value="">S√©lectionner un d√©partement...</option>
                        {% for dept in departements %}
                        <option value="{{ dept.id }}">{{ dept.LIBELLE }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="poste" class="required">Poste</label>
                    <select id="poste" name="poste" required>
                        <option value="">S√©lectionner un poste...</option>
                        {% for poste in postes %}
                        <option value="{{ poste.id }}">{{ poste.LIBELLE }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="date_debut_affectation" class="required">Date de d√©but</label>
                    <input type="date" id="date_debut_affectation" name="date_debut" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin_affectation">Date de fin</label>
                    <input type="date" id="date_fin_affectation" name="date_fin">
                    <small style="color: #666; font-size: 12px;">
                        Laisser vide pour une affectation en cours
                    </small>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif_affectation" name="actif" checked>
                        Affectation active
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="affectationSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

 <!-- Modale Historique Noms/Pr√©noms (ZYNP) -->
<div id="znpModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="znpModalTitle">Ajouter un historique nom/pr√©nom</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="znpForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="znp_nom" class="required">Nom</label>
                    <input type="text" id="znp_nom" name="nom" required>
                </div>
                <div class="modal-form-group">
                    <label for="znp_prenoms" class="required">Pr√©nom(s)</label>
                    <input type="text" id="znp_prenoms" name="prenoms" required>
                </div>
                <div class="modal-form-group">
                    <label for="znp_date_debut_validite" class="required">Date de d√©but de validit√©</label>
                    <input type="date" id="znp_date_debut_validite" name="date_debut_validite" required>
                </div>
                <div class="modal-form-group">
                    <label for="znp_date_fin_validite">Date de fin de validit√©</label>
                    <input type="date" id="znp_date_fin_validite" name="date_fin_validite">
                    <small class="form-text text-muted">
                        Laisser vide si c'est l'historique actuel
                    </small>
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="znp_actif" name="actif" checked>
                        Historique actif
                    </label>
                </div>

                <!-- üÜï Section d'information sur les restrictions -->
                <div id="znpRestrictions" class="alert alert-info" style="display: none;">
                    <small>
                        <i class="fas fa-info-circle"></i>
                        <strong>R√®gles de validation :</strong><br>
                        ‚Ä¢ Un seul historique peut √™tre actif √† la fois<br>
                        ‚Ä¢ Les p√©riodes ne doivent pas se chevaucher<br>
                        ‚Ä¢ L'historique actuel doit √™tre cl√¥tur√© avant d'en cr√©er un nouveau
                    </small>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="znpSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>

 <!-- Modale Famille -->
<div id="familleModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="familleModalTitle">Ajouter une personne √† charge</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="familleForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <div class="modal-form-group">
                    <label for="personne_charge" class="required">Personne en charge</label>
                    <select id="personne_charge" name="personne_charge" required>
                        <option value="">S√©lectionner...</option>
                        <option value="ENFANT">Enfant</option>
                        <option value="CONJOINT">Conjoint</option>
                        <option value="PARENT">Parent</option>
                        <option value="AUTRE">Autre personne √† charge</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="nom" class="required">Nom</label>
                    <input type="text" id="nom" name="nom" required>
                </div>
                <div class="modal-form-group">
                    <label for="prenom" class="required">Pr√©nom</label>
                    <input type="text" id="prenom" name="prenom" required>
                </div>
                <div class="modal-form-group">
                    <label for="sexe" class="required">Sexe</label>
                    <select id="sexe" name="sexe" required>
                        <option value="">S√©lectionner...</option>
                        <option value="M">Masculin</option>
                        <option value="F">F√©minin</option>
                    </select>
                </div>
                <div class="modal-form-group">
                    <label for="date_naissance" class="required">Date de naissance</label>
                    <input type="date" id="date_naissance" name="date_naissance" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_debut_prise_charge" class="required">Date de d√©but de prise en charge</label>
                    <input type="date" id="date_debut_prise_charge" name="date_debut_prise_charge" required>
                </div>
                <div class="modal-form-group">
                    <label for="date_fin_prise_charge">Date de fin de prise en charge</label>
                    <input type="date" id="date_fin_prise_charge" name="date_fin_prise_charge">
                </div>
                <div class="modal-form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="actif_famille" name="actif" checked>
                        Prise en charge active
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">Annuler</button>
                <button type="submit" class="btn btn-primary" id="familleSubmitBtn">Ajouter</button>
            </div>
        </form>
    </div>
</div>


 <!-- Modale Personne √† Pr√©venir -->
<div id="personnePrevModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 id="personnePrevModalTitle">
                <i class="fas fa-ambulance"></i> Ajouter un contact d'urgence
            </h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="personnePrevForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <!-- Section: Identit√© -->
                <div class="modal-section">
                    <h4><i class="fas fa-user"></i> Identit√©</h4>
                    <div class="modal-form-row">
                        <div class="modal-form-group">
                            <label for="nom_prev" class="required">Nom</label>
                            <input type="text" id="nom_prev" name="nom" required
                                   placeholder="Nom de famille">
                        </div>
                        <div class="modal-form-group">
                            <label for="prenom_prev" class="required">Pr√©nom</label>
                            <input type="text" id="prenom_prev" name="prenom" required
                                   placeholder="Pr√©nom">
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label for="lien_parente" class="required">Lien de parent√©</label>
                        <select id="lien_parente" name="lien_parente" required>
                            <option value="">S√©lectionner...</option>
                            <option value="CONJOINT">üíë Conjoint(e)</option>
                            <option value="PARENT">üë®‚Äçüë©‚Äçüë¶ Parent</option>
                            <option value="ENFANT">üë∂ Enfant</option>
                            <option value="FRERE_SOEUR">üë´ Fr√®re/S≈ìur</option>
                            <option value="AMI">ü§ù Ami(e)</option>
                            <option value="COLLEGUE">üíº Coll√®gue</option>
                            <option value="VOISIN">üè† Voisin(e)</option>
                            <option value="AUTRE">üë§ Autre</option>
                        </select>
                    </div>
                </div>

                <!-- Section: Coordonn√©es -->
                <div class="modal-section">
                    <h4><i class="fas fa-phone"></i> Coordonn√©es</h4>
                    <div class="modal-form-row">
                        <div class="modal-form-group">
                            <label for="telephone_principal" class="required">
                                <i class="fas fa-phone"></i> T√©l√©phone principal
                            </label>
                            <input type="tel" id="telephone_principal" name="telephone_principal" required
                                   placeholder="+33 6 12 34 56 78">
                            <small>Format recommand√©: +33 6 12 34 56 78</small>
                        </div>
                        <div class="modal-form-group">
                            <label for="telephone_secondaire">
                                <i class="fas fa-mobile-alt"></i> T√©l√©phone secondaire
                            </label>
                            <input type="tel" id="telephone_secondaire" name="telephone_secondaire"
                                   placeholder="+33 1 23 45 67 89">
                            <small>Optionnel</small>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label for="email_prev">
                            <i class="fas fa-envelope"></i> Email
                        </label>
                        <input type="email" id="email_prev" name="email"
                               placeholder="email@exemple.com">
                        <small>Optionnel</small>
                    </div>
                    <div class="modal-form-group">
                        <label for="adresse_prev">
                            <i class="fas fa-map-marker-alt"></i> Adresse compl√®te
                        </label>
                        <textarea id="adresse_prev" name="adresse" rows="3"
                                  placeholder="Adresse compl√®te (optionnel)"></textarea>
                    </div>
                </div>

                <!-- Section: Urgence -->
                <div class="modal-section">
                    <h4><i class="fas fa-exclamation-triangle"></i> Informations d'urgence</h4>
                    <div class="modal-form-group">
                        <label for="ordre_priorite" class="required">Ordre de priorit√©</label>
                        <select id="ordre_priorite" name="ordre_priorite" required>
                            <option value="">S√©lectionner...</option>
                            <option value="1">üî¥ Contact principal (priorit√© 1)</option>
                            <option value="2">üü† Contact secondaire (priorit√© 2)</option>
                            <option value="3">üü° Contact tertiaire (priorit√© 3)</option>
                        </select>
                        <small>D√©finit l'ordre dans lequel contacter les personnes en cas d'urgence</small>
                    </div>
                    <div class="modal-form-group">
                        <label for="remarques_prev">
                            <i class="fas fa-comment"></i> Remarques
                        </label>
                        <textarea id="remarques_prev" name="remarques" rows="3"
                                  placeholder="Informations compl√©mentaires (disponibilit√©s, instructions sp√©ciales, etc.)"></textarea>
                    </div>
                </div>

                <!-- Section: Validit√© -->
                <div class="modal-section">
                    <h4><i class="fas fa-calendar"></i> P√©riode de validit√©</h4>
                    <div class="modal-form-row">
                        <div class="modal-form-group">
                            <label for="date_debut_validite_prev" class="required">Date de d√©but</label>
                            <input type="date" id="date_debut_validite_prev" name="date_debut_validite" required>
                        </div>
                        <div class="modal-form-group">
                            <label for="date_fin_validite_prev">Date de fin</label>
                            <input type="date" id="date_fin_validite_prev" name="date_fin_validite">
                            <small>Laisser vide si contact permanent</small>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="actif_prev" name="actif" checked>
                            <span>Contact actif</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">
                    <i class="fas fa-times"></i> Annuler
                </button>
                <button type="submit" class="btn btn-primary" id="personnePrevSubmitBtn">
                    <i class="fas fa-save"></i> <span id="personnePrevSubmitText">Ajouter</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modale de visualisation des d√©tails -->
<div id="personnePrevViewModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fas fa-eye"></i> D√©tails du contact d'urgence</h2>
            <button type="button" class="close">&times;</button>
        </div>
        <div class="modal-body" id="personnePrevViewContent">
            <!-- Le contenu sera ins√©r√© dynamiquement -->
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary btn-cancel">
                <i class="fas fa-times"></i> Fermer
            </button>
        </div>
    </div>
</div>

 <!-- Modale Identit√© Bancaire -->
<div id="identiteBancaireModal" class="modal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <h2 id="identiteBancaireModalTitle">
                <i class="fas fa-university"></i> <span id="identiteBancaireTitleText">Ajouter une identit√© bancaire</span>
            </h2>
            <button type="button" class="close">&times;</button>
        </div>
        <form id="identiteBancaireForm">
            {% csrf_token %}
            <input type="hidden" name="employe_uuid" value="{{ employe.uuid }}">
            <div class="modal-body">
                <!-- Section: Titulaire -->
                <div class="modal-section">
                    <h4><i class="fas fa-user-circle"></i> Titulaire du compte</h4>
                    <div class="modal-form-group">
                        <label for="titulaire_compte" class="required">Nom du titulaire</label>
                        <input type="text" id="titulaire_compte" name="titulaire_compte" required
                               placeholder="NOM Pr√©nom">
                        <small>Nom complet tel qu'il appara√Æt sur le RIB</small>
                    </div>
                    <div class="modal-form-group">
                        <label for="type_compte">Type de compte</label>
                        <select id="type_compte" name="type_compte">
                            <option value="COURANT">Compte courant</option>
                            <option value="EPARGNE">Compte √©pargne</option>
                            <option value="JOINT">Compte joint</option>
                        </select>
                    </div>
                </div>

                <!-- Section: Banque -->
                <div class="modal-section">
                    <h4><i class="fas fa-building"></i> Informations bancaires</h4>
                    <div class="modal-form-group">
                        <label for="nom_banque" class="required">Nom de la banque</label>
                        <input type="text" id="nom_banque" name="nom_banque" required
                               placeholder="Ex: Cr√©dit Agricole, BNP Paribas...">
                    </div>
                    <div class="modal-form-group">
                        <label for="domiciliation">Domiciliation</label>
                        <input type="text" id="domiciliation" name="domiciliation"
                               placeholder="Adresse de l'agence bancaire">
                        <small>Optionnel</small>
                    </div>
                    <div class="modal-form-group">
                        <label for="date_ouverture">Date d'ouverture du compte</label>
                        <input type="date" id="date_ouverture" name="date_ouverture">
                        <small>Optionnel</small>
                    </div>
                </div>

                <!-- Section: RIB -->
                <div class="modal-section rib-section-modal">
                    <h4><i class="fas fa-credit-card"></i> Relev√© d'Identit√© Bancaire (RIB)</h4>
                    <div class="rib-input-grid">
                        <div class="modal-form-group">
                            <label for="code_banque" class="required">Code Banque</label>
                            <input type="text" id="code_banque" name="code_banque" required
                                   maxlength="5" pattern="[0-9]{5}"
                                   placeholder="12345">
                            <small>5 chiffres</small>
                        </div>
                        <div class="modal-form-group">
                            <label for="code_guichet" class="required">Code Guichet</label>
                            <input type="text" id="code_guichet" name="code_guichet" required
                                   maxlength="5" pattern="[0-9]{5}"
                                   placeholder="12345">
                            <small>5 chiffres</small>
                        </div>
                        <div class="modal-form-group">
                            <label for="numero_compte" class="required">Num√©ro de Compte</label>
                            <input type="text" id="numero_compte" name="numero_compte" required
                                   maxlength="11"
                                   placeholder="12345678901">
                            <small>11 caract√®res</small>
                        </div>
                        <div class="modal-form-group">
                            <label for="cle_rib" class="required">Cl√© RIB</label>
                            <input type="text" id="cle_rib" name="cle_rib" required
                                   maxlength="2" pattern="[0-9]{2}"
                                   placeholder="12">
                            <small>2 chiffres</small>
                        </div>
                    </div>
                </div>

                <!-- Section: IBAN / BIC -->
                <div class="modal-section">
                    <h4><i class="fas fa-globe"></i> Identifiants internationaux</h4>
                    <div class="modal-form-group">
                        <label for="iban">IBAN</label>
                        <input type="text" id="iban" name="iban"
                               maxlength="34"
                               placeholder="FR76 1234 5678 9012 3456 7890 123">
                        <small>Optionnel - 27 caract√®res pour la France (FR + 25 caract√®res)</small>
                    </div>
                    <div class="modal-form-group">
                        <label for="bic">BIC/SWIFT</label>
                        <input type="text" id="bic" name="bic"
                               maxlength="11"
                               placeholder="BNPAFRPP ou BNPAFRPPXXX">
                        <small>Optionnel - 8 ou 11 caract√®res</small>
                    </div>
                </div>

                <!-- Section: Remarques -->
                <div class="modal-section">
                    <h4><i class="fas fa-comment"></i> Remarques</h4>
                    <div class="modal-form-group">
                        <label for="remarques">Remarques √©ventuelles</label>
                        <textarea id="remarques" name="remarques" rows="3"
                                  placeholder="Informations compl√©mentaires..."></textarea>
                    </div>
                    <div class="modal-form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="actif_ib" name="actif" checked>
                            <span>Identit√© bancaire active</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-cancel">
                    <i class="fas fa-times"></i> Annuler
                </button>
                <button type="submit" class="btn btn-primary" id="identiteBancaireSubmitBtn">
                    <i class="fas fa-save"></i> <span id="identiteBancaireSubmitText">Enregistrer</span>
                </button>
            </div>
        </form>
    </div>
</div>