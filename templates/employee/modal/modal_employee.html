 {% load static %}
 <!-- MODAL CONTRAT -->
    <div class="modal fade" id="contratModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="contratModalLabel">
                        <i class="bi bi-file-earmark-text"></i>
                        <span id="modalTitle">Ajouter un contrat</span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="contratForm">
                        {% csrf_token %}
                        <input type="hidden" id="contratId" name="contrat_id">
                        <input type="hidden" name="employe_matricule" value="{{ employe.matricule }}">

                        <!-- Type de contrat -->
                        <div class="mb-3">
                            <label for="typeContrat" class="form-label">
                                <i class="bi bi-briefcase"></i> Type de contrat <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="typeContrat" name="type_contrat" required>
                                <option value="">-- Sélectionner --</option>
                                <option value="CDD">CDD</option>
                                <option value="CDI">CDI</option>
                                <option value="STAGE">Stage</option>
                                <option value="ALTERNANCE">Alternance</option>
                                <option value="APPRENTISSAGE">Apprentissage</option>
                                <option value="CONTRACTUELLE">Contractuelle</option>
                                <option value="VACATAIRE">Vacataire</option>
                            </select>
                        </div>

                        <!-- Date de début -->
                        <div class="mb-3">
                            <label for="dateDebut" class="form-label">
                                <i class="bi bi-calendar-event"></i> Date de début <span class="text-danger">*</span>
                            </label>
                            <input type="date" class="form-control" id="dateDebut" name="date_debut" required>
                        </div>

                        <!-- Date de fin -->
                        <div class="mb-3">
                            <label for="dateFin" class="form-label">
                                <i class="bi bi-calendar-x"></i> Date de fin
                            </label>
                            <input type="date" class="form-control" id="dateFin" name="date_fin">
                            <small class="form-text text-muted">Laissez vide pour un contrat en cours</small>
                        </div>

                        <!-- Messages d'erreur -->
                        <div id="errorMessage" class="alert alert-danger d-none"></div>

                        <!-- Boutons -->
                        <div class="btn-group-modal">
                            <button type="submit" class="btn btn-primary-custom flex-grow-1">
                                <i class="bi bi-check-circle"></i> Enregistrer
                            </button>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                <i class="bi bi-x-circle"></i> Annuler
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

 <!-- MODAL CONFIRMATION SUPPRESSION -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content modal-danger">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="bi bi-exclamation-triangle-fill"></i>
                        Confirmer la suppression
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <i class="bi bi-trash delete-icon"></i>
                    <h5 class="mt-3">Êtes-vous sûr ?</h5>
                    <p id="deleteMessage" class="text-muted"></p>

                    <div class="warning-box">
                        <i class="bi bi-exclamation-triangle-fill text-warning"></i>
                        <strong>Attention :</strong> Cette action est irréversible !
                    </div>

                    <input type="hidden" id="deleteContratId">

                    <div class="btn-group-modal justify-content-center mt-4">
                        <button type="button" class="btn btn-danger" onclick="deleteContrat()">
                            <i class="bi bi-trash-fill"></i> Oui, supprimer
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-circle"></i> Annuler
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>


 <!-- ========================================== -->
<!-- MODALS AFFECTATION -->
<!-- ========================================== -->

<!-- MODAL AJOUT/MODIFICATION AFFECTATION -->
<div class="modal fade" id="affectationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-briefcase"></i>
                    <span id="affectationModalTitle">Ajouter une affectation</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="affectationForm">
                    {% csrf_token %}
                    <input type="hidden" id="affectationId">
                    <input type="hidden" name="employe_matricule" value="{{ employe.matricule }}">

                    <!-- Poste -->
                    <div class="mb-3">
                        <label for="affectationPoste" class="form-label">
                            <i class="bi bi-briefcase"></i> Poste <span class="text-danger">*</span>
                        </label>
                        <select class="form-select" id="affectationPoste" name="poste_id" required>
                            <option value="">-- Sélectionner un poste --</option>
                            {% for poste in postes %}
                                <option value="{{ poste.id }}">
                                    {{ poste.CODE }} - {{ poste.LIBELLE }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Date début -->
                    <div class="mb-3">
                        <label for="affectationDateDebut" class="form-label">
                            <i class="bi bi-calendar-event"></i> Date de début <span class="text-danger">*</span>
                        </label>
                        <input type="date" class="form-control" id="affectationDateDebut" name="date_debut" required>
                    </div>

                    <!-- Date fin -->
                    <div class="mb-3">
                        <label for="affectationDateFin" class="form-label">
                            <i class="bi bi-calendar-x"></i> Date de fin
                        </label>
                        <input type="date" class="form-control" id="affectationDateFin" name="date_fin">
                        <small class="form-text text-muted">Laissez vide pour une affectation en cours</small>
                    </div>

                    <!-- Messages d'erreur -->
                    <div id="affectationError" class="alert alert-danger d-none"></div>

                    <!-- Boutons -->
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary-custom flex-grow-1">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-circle"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MODAL SUPPRESSION AFFECTATION -->
<div class="modal fade" id="deleteAffectationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-danger">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    Confirmer la suppression
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-trash delete-icon"></i>
                <h5 class="mt-3">Êtes-vous sûr ?</h5>
                <p id="deleteAffectationMessage"></p>
                <input type="hidden" id="deleteAffectationId">
                <div class="d-flex gap-2 justify-content-center mt-4">
                    <button type="button" class="btn btn-danger" onclick="deleteAffectation()">
                        <i class="bi bi-trash-fill"></i> Oui, supprimer
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle"></i> Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- ========================================== -->
<!-- MODALS TÉLÉPHONE -->
<!-- ========================================== -->

<!-- MODAL AJOUT/MODIFICATION TÉLÉPHONE -->
<div class="modal fade" id="telephoneModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-telephone"></i>
                    <span id="telephoneModalTitle">Ajouter un téléphone</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="telephoneForm">
                    {% csrf_token %}
                    <input type="hidden" id="telephoneId">
                    <input type="hidden" name="employe_matricule" value="{{ employe.matricule }}">

                    <!-- Numéro -->
                    <div class="mb-3">
                        <label for="telephoneNumero" class="form-label">
                            <i class="bi bi-phone"></i> Numéro de téléphone <span class="text-danger">*</span>
                        </label>
                        <input type="tel" class="form-control" id="telephoneNumero" name="numero"
                               placeholder="+225 07 12 34 56 78" required>
                    </div>

                    <!-- Date début validité -->
                    <div class="mb-3">
                        <label for="telephoneDateDebut" class="form-label">
                            <i class="bi bi-calendar-event"></i> Date de début de validité <span class="text-danger">*</span>
                        </label>
                        <input type="date" class="form-control" id="telephoneDateDebut" name="date_debut" required>
                    </div>

                    <!-- Date fin validité -->
                    <div class="mb-3">
                        <label for="telephoneDateFin" class="form-label">
                            <i class="bi bi-calendar-x"></i> Date de fin de validité
                        </label>
                        <input type="date" class="form-control" id="telephoneDateFin" name="date_fin">
                        <small class="form-text text-muted">Laissez vide si le numéro est toujours actif</small>
                    </div>

                    <!-- Messages d'erreur -->
                    <div id="telephoneError" class="alert alert-danger d-none"></div>

                    <!-- Boutons -->
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary-custom flex-grow-1">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-circle"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MODAL SUPPRESSION TÉLÉPHONE -->
<div class="modal fade" id="deleteTelephoneModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-danger">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    Confirmer la suppression
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-trash delete-icon"></i>
                <h5 class="mt-3">Êtes-vous sûr ?</h5>
                <p id="deleteTelephoneMessage"></p>
                <input type="hidden" id="deleteTelephoneId">
                <div class="d-flex gap-2 justify-content-center mt-4">
                    <button type="button" class="btn btn-danger" onclick="deleteTelephone()">
                        <i class="bi bi-trash-fill"></i> Oui, supprimer
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle"></i> Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- ========================================== -->
<!-- MODALS EMAIL -->
<!-- ========================================== -->

<!-- MODAL AJOUT/MODIFICATION EMAIL -->
<div class="modal fade" id="emailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-envelope"></i>
                    <span id="emailModalTitle">Ajouter un email</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="emailForm">
                    {% csrf_token %}
                    <input type="hidden" id="emailId">
                    <input type="hidden" name="employe_matricule" value="{{ employe.matricule }}">

                    <!-- Email -->
                    <div class="mb-3">
                        <label for="emailAdresse" class="form-label">
                            <i class="bi bi-envelope-at"></i> Adresse email <span class="text-danger">*</span>
                        </label>
                        <input type="email" class="form-control" id="emailAdresse" name="email"
                               placeholder="prenom.nom@exemple.com" required>
                    </div>

                    <!-- Date début validité -->
                    <div class="mb-3">
                        <label for="emailDateDebut" class="form-label">
                            <i class="bi bi-calendar-event"></i> Date de début de validité <span class="text-danger">*</span>
                        </label>
                        <input type="date" class="form-control" id="emailDateDebut" name="date_debut" required>
                    </div>

                    <!-- Date fin validité -->
                    <div class="mb-3">
                        <label for="emailDateFin" class="form-label">
                            <i class="bi bi-calendar-x"></i> Date de fin de validité
                        </label>
                        <input type="date" class="form-control" id="emailDateFin" name="date_fin">
                        <small class="form-text text-muted">Laissez vide si l'email est toujours actif</small>
                    </div>

                    <!-- Messages d'erreur -->
                    <div id="emailError" class="alert alert-danger d-none"></div>

                    <!-- Boutons -->
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary-custom flex-grow-1">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-circle"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MODAL SUPPRESSION EMAIL -->
<div class="modal fade" id="deleteEmailModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-danger">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    Confirmer la suppression
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-trash delete-icon"></i>
                <h5 class="mt-3">Êtes-vous sûr ?</h5>
                <p id="deleteEmailMessage"></p>
                <input type="hidden" id="deleteEmailId">
                <div class="d-flex gap-2 justify-content-center mt-4">
                    <button type="button" class="btn btn-danger" onclick="deleteEmail()">
                        <i class="bi bi-trash-fill"></i> Oui, supprimer
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle"></i> Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- ========================================== -->
<!-- MODALS ADRESSE -->
<!-- ========================================== -->

<!-- MODAL AJOUT/MODIFICATION ADRESSE -->
<div class="modal fade" id="adresseModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-geo-alt"></i>
                    <span id="adresseModalTitle">Ajouter une adresse</span>
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="adresseForm">
                    {% csrf_token %}
                    <input type="hidden" id="adresseId">
                    <input type="hidden" name="employe_matricule" value="{{ employe.matricule }}">

                    <!-- Rue -->
                    <div class="mb-3">
                        <label for="adresseRue" class="form-label">
                            <i class="bi bi-house-door"></i> Rue <span class="text-danger">*</span>
                        </label>
                        <input type="text" class="form-control" id="adresseRue" name="rue"
                               placeholder="123 Avenue de la République" required>
                    </div>

                    <div class="row">
                        <!-- Ville -->
                        <div class="col-md-6 mb-3">
                            <label for="adresseVille" class="form-label">
                                <i class="bi bi-building"></i> Ville <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="adresseVille" name="ville"
                                   placeholder="Paris" required>
                        </div>

                        <!-- Code postal -->
                        <div class="col-md-6 mb-3">
                            <label for="adresseCodePostal" class="form-label">
                                <i class="bi bi-mailbox"></i> Code postal <span class="text-danger">*</span>
                            </label>
                            <input type="text" class="form-control" id="adresseCodePostal" name="code_postal"
                                   placeholder="00225" required>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Pays -->
                        <div class="col-md-6 mb-3">
                            <label for="adressePays" class="form-label">
                                <i class="bi bi-globe"></i> Pays <span class="text-danger">*</span>
                            </label>
                            {% include 'employee/modal/pays.html' %}
                        </div>

                        <!-- Type d'adresse -->
                        <div class="col-md-6 mb-3">
                            <label for="adresseType" class="form-label">
                                <i class="bi bi-star"></i> Type d'adresse <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="adresseType" name="type_adresse" required>
                                <option value="">-- Sélectionner --</option>
                                <option value="PRINCIPALE">Résidence principale</option>
                                <option value="SECONDAIRE">Résidence secondaire</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <!-- Date début -->
                        <div class="col-md-6 mb-3">
                            <label for="adresseDateDebut" class="form-label">
                                <i class="bi bi-calendar-event"></i> Date de début <span class="text-danger">*</span>
                            </label>
                            <input type="date" class="form-control" id="adresseDateDebut" name="date_debut" required>
                        </div>

                        <!-- Date fin -->
                        <div class="col-md-6 mb-3">
                            <label for="adresseDateFin" class="form-label">
                                <i class="bi bi-calendar-x"></i> Date de fin
                            </label>
                            <input type="date" class="form-control" id="adresseDateFin" name="date_fin">
                            <small class="form-text text-muted">Laissez vide pour l'adresse actuelle</small>
                        </div>
                    </div>

                    <!-- Messages d'erreur -->
                    <div id="adresseError" class="alert alert-danger d-none"></div>

                    <!-- Boutons -->
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary-custom flex-grow-1">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                            <i class="bi bi-x-circle"></i> Annuler
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- MODAL SUPPRESSION ADRESSE -->
<div class="modal fade" id="deleteAdresseModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content modal-danger">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    Confirmer la suppression
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <i class="bi bi-trash delete-icon"></i>
                <h5 class="mt-3">Êtes-vous sûr ?</h5>
                <p id="deleteAdresseMessage"></p>
                <input type="hidden" id="deleteAdresseId">
                <div class="d-flex gap-2 justify-content-center mt-4">
                    <button type="button" class="btn btn-danger" onclick="deleteAdresse()">
                        <i class="bi bi-trash-fill"></i> Oui, supprimer
                    </button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle"></i> Annuler
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

