# Generated by Django 5.0.6 on 2026-01-24 00:29

import django.core.validators
import django.db.models.deletion
import uuid
from decimal import Decimal
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('employee', '0002_alter_zyre_unique_together'),
    ]

    operations = [
        migrations.CreateModel(
            name='MTCA',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('CODE', models.CharField(max_length=20, unique=True, verbose_name='Code catégorie')),
                ('LIBELLE', models.CharField(max_length=100, verbose_name='Libellé')),
                ('DESCRIPTION', models.TextField(blank=True, null=True, verbose_name='Description')),
                ('ICONE', models.CharField(blank=True, help_text="Classe CSS de l'icône (ex: fa-laptop, fa-car)", max_length=50, null=True, verbose_name='Icône')),
                ('DUREE_AMORTISSEMENT', models.PositiveIntegerField(default=36, help_text="Durée d'amortissement en mois", verbose_name="Durée d'amortissement (mois)")),
                ('STATUT', models.BooleanField(default=True, verbose_name='Actif')),
                ('ORDRE', models.PositiveIntegerField(default=0, verbose_name="Ordre d'affichage")),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Catégorie de matériel',
                'verbose_name_plural': 'Catégories de matériel',
                'db_table': 'materiel_categorie',
                'ordering': ['ORDRE', 'LIBELLE'],
            },
        ),
        migrations.CreateModel(
            name='MTFO',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('CODE', models.CharField(max_length=20, unique=True, verbose_name='Code fournisseur')),
                ('RAISON_SOCIALE', models.CharField(max_length=200, verbose_name='Raison sociale')),
                ('CONTACT', models.CharField(blank=True, max_length=100, null=True, verbose_name='Personne contact')),
                ('TELEPHONE', models.CharField(blank=True, max_length=20, null=True, verbose_name='Téléphone')),
                ('EMAIL', models.EmailField(blank=True, max_length=254, null=True, verbose_name='Email')),
                ('ADRESSE', models.TextField(blank=True, null=True, verbose_name='Adresse')),
                ('SITE_WEB', models.URLField(blank=True, null=True, verbose_name='Site web')),
                ('NOTES', models.TextField(blank=True, null=True, verbose_name='Notes')),
                ('STATUT', models.BooleanField(default=True, verbose_name='Actif')),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'Fournisseur',
                'verbose_name_plural': 'Fournisseurs',
                'db_table': 'materiel_fournisseur',
                'ordering': ['RAISON_SOCIALE'],
            },
        ),
        migrations.CreateModel(
            name='MTMT',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('CODE_INTERNE', models.CharField(help_text='Identifiant unique du matériel (ex: PC-2024-001)', max_length=50, unique=True, verbose_name='Code interne')),
                ('DESIGNATION', models.CharField(max_length=200, verbose_name='Désignation')),
                ('MARQUE', models.CharField(blank=True, max_length=100, null=True, verbose_name='Marque')),
                ('MODELE', models.CharField(blank=True, max_length=100, null=True, verbose_name='Modèle')),
                ('NUMERO_SERIE', models.CharField(blank=True, max_length=100, null=True, verbose_name='Numéro de série')),
                ('CARACTERISTIQUES', models.TextField(blank=True, null=True, verbose_name='Caractéristiques techniques')),
                ('DATE_ACQUISITION', models.DateField(verbose_name="Date d'acquisition")),
                ('PRIX_ACQUISITION', models.DecimalField(decimal_places=2, max_digits=12, validators=[django.core.validators.MinValueValidator(Decimal('0'))], verbose_name="Prix d'acquisition (HT)")),
                ('NUMERO_FACTURE', models.CharField(blank=True, max_length=50, null=True, verbose_name='N° facture')),
                ('NUMERO_BON_COMMANDE', models.CharField(blank=True, max_length=50, null=True, verbose_name='N° bon de commande')),
                ('DATE_FIN_GARANTIE', models.DateField(blank=True, null=True, verbose_name='Date fin de garantie')),
                ('CONDITIONS_GARANTIE', models.TextField(blank=True, null=True, verbose_name='Conditions de garantie')),
                ('LOCALISATION', models.CharField(blank=True, help_text='Bâtiment, étage, bureau, etc.', max_length=200, null=True, verbose_name='Localisation')),
                ('ETAT', models.CharField(choices=[('NEUF', 'Neuf'), ('BON', 'Bon état'), ('USAGE', 'Usagé'), ('DEFAILLANT', 'Défaillant'), ('HORS_SERVICE', 'Hors service'), ('REFORME', 'Réformé')], default='NEUF', max_length=20, verbose_name='État')),
                ('STATUT', models.CharField(choices=[('DISPONIBLE', 'Disponible'), ('AFFECTE', 'Affecté'), ('EN_MAINTENANCE', 'En maintenance'), ('EN_PRET', 'En prêt'), ('PERDU', 'Perdu/Volé'), ('REFORME', 'Réformé')], default='DISPONIBLE', max_length=20, verbose_name='Statut')),
                ('PHOTO', models.ImageField(blank=True, null=True, upload_to='materiel/photos/%Y/%m/', verbose_name='Photo')),
                ('DOCUMENT', models.FileField(blank=True, null=True, upload_to='materiel/documents/%Y/%m/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'jpg', 'jpeg', 'png'])], verbose_name='Document joint')),
                ('DATE_AFFECTATION', models.DateField(blank=True, null=True, verbose_name="Date d'affectation")),
                ('NOTES', models.TextField(blank=True, null=True, verbose_name='Notes')),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
                ('AFFECTE_A', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='materiels_affectes', to='employee.zy00', verbose_name='Affecté à')),
                ('CATEGORIE', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='materiels', to='materiel.mtca', verbose_name='Catégorie')),
                ('CREATED_BY', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='materiels_crees', to='employee.zy00', verbose_name='Créé par')),
                ('FOURNISSEUR', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='materiels_fournis', to='materiel.mtfo', verbose_name='Fournisseur')),
            ],
            options={
                'verbose_name': 'Matériel',
                'verbose_name_plural': 'Matériels',
                'db_table': 'materiel_equipement',
                'ordering': ['-CREATED_AT'],
                'permissions': [('can_manage_materiel', 'Peut gérer le matériel'), ('can_view_all_materiel', 'Peut voir tout le matériel'), ('can_affecter_materiel', 'Peut affecter le matériel')],
            },
        ),
        migrations.CreateModel(
            name='MTMA',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('REFERENCE', models.CharField(max_length=30, unique=True, verbose_name='Référence')),
                ('TYPE_MAINTENANCE', models.CharField(choices=[('PREVENTIVE', 'Maintenance préventive'), ('CORRECTIVE', 'Maintenance corrective'), ('REPARATION', 'Réparation'), ('REVISION', 'Révision'), ('MISE_A_JOUR', 'Mise à jour')], max_length=20, verbose_name='Type de maintenance')),
                ('DESCRIPTION', models.TextField(verbose_name="Description de l'intervention")),
                ('DATE_PLANIFIEE', models.DateField(verbose_name='Date planifiée')),
                ('DATE_DEBUT', models.DateField(blank=True, null=True, verbose_name='Date de début')),
                ('DATE_FIN', models.DateField(blank=True, null=True, verbose_name='Date de fin')),
                ('COUT_PIECES', models.DecimalField(decimal_places=2, default=Decimal('0'), max_digits=10, verbose_name='Coût pièces')),
                ('COUT_MAIN_OEUVRE', models.DecimalField(decimal_places=2, default=Decimal('0'), max_digits=10, verbose_name="Coût main d'œuvre")),
                ('NUMERO_FACTURE', models.CharField(blank=True, max_length=50, null=True, verbose_name='N° facture')),
                ('STATUT', models.CharField(choices=[('PLANIFIE', 'Planifié'), ('EN_COURS', 'En cours'), ('TERMINE', 'Terminé'), ('ANNULE', 'Annulé')], default='PLANIFIE', max_length=20, verbose_name='Statut')),
                ('RESULTAT', models.TextField(blank=True, null=True, verbose_name='Résultat / Observations')),
                ('ETAT_APRES', models.CharField(blank=True, choices=[('NEUF', 'Neuf'), ('BON', 'Bon état'), ('USAGE', 'Usagé'), ('DEFAILLANT', 'Défaillant'), ('HORS_SERVICE', 'Hors service'), ('REFORME', 'Réformé')], max_length=20, null=True, verbose_name='État après intervention')),
                ('RAPPORT', models.FileField(blank=True, null=True, upload_to='materiel/maintenances/%Y/%m/', verbose_name="Rapport d'intervention")),
                ('PROCHAINE_MAINTENANCE', models.DateField(blank=True, null=True, verbose_name='Prochaine maintenance')),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
                ('DEMANDE_PAR', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='demandes_maintenance', to='employee.zy00', verbose_name='Demandé par')),
                ('INTERVENANT_INTERNE', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='maintenances_effectuees', to='employee.zy00', verbose_name='Intervenant interne')),
                ('PRESTATAIRE', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='maintenances', to='materiel.mtfo', verbose_name='Prestataire')),
                ('MATERIEL', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='maintenances', to='materiel.mtmt', verbose_name='Matériel')),
            ],
            options={
                'verbose_name': 'Maintenance',
                'verbose_name_plural': 'Maintenances',
                'db_table': 'materiel_maintenance',
                'ordering': ['-DATE_PLANIFIEE'],
            },
        ),
        migrations.CreateModel(
            name='MTAF',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('TYPE_AFFECTATION', models.CharField(choices=[('AFFECTATION', 'Affectation'), ('PRET', 'Prêt temporaire'), ('MISE_A_DISPOSITION', 'Mise à disposition')], default='AFFECTATION', max_length=20, verbose_name='Type')),
                ('DATE_DEBUT', models.DateField(verbose_name='Date de début')),
                ('DATE_FIN', models.DateField(blank=True, null=True, verbose_name='Date de fin')),
                ('DATE_RETOUR_PREVUE', models.DateField(blank=True, help_text='Pour les prêts temporaires', null=True, verbose_name='Date de retour prévue')),
                ('MOTIF', models.TextField(blank=True, null=True, verbose_name='Motif')),
                ('ETAT_SORTIE', models.CharField(choices=[('NEUF', 'Neuf'), ('BON', 'Bon état'), ('USAGE', 'Usagé'), ('DEFAILLANT', 'Défaillant'), ('HORS_SERVICE', 'Hors service'), ('REFORME', 'Réformé')], max_length=20, verbose_name='État à la sortie')),
                ('ETAT_RETOUR', models.CharField(blank=True, choices=[('NEUF', 'Neuf'), ('BON', 'Bon état'), ('USAGE', 'Usagé'), ('DEFAILLANT', 'Défaillant'), ('HORS_SERVICE', 'Hors service'), ('REFORME', 'Réformé')], max_length=20, null=True, verbose_name='État au retour')),
                ('COMMENTAIRE_RETOUR', models.TextField(blank=True, null=True, verbose_name='Commentaire au retour')),
                ('FICHE_AFFECTATION', models.FileField(blank=True, null=True, upload_to='materiel/affectations/%Y/%m/', verbose_name="Fiche d'affectation signée")),
                ('ACTIF', models.BooleanField(default=True, verbose_name='Affectation active')),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
                ('AFFECTE_PAR', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='affectations_effectuees', to='employee.zy00', verbose_name='Affecté par')),
                ('EMPLOYE', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='affectations_materiel', to='employee.zy00', verbose_name='Employé')),
                ('RETOUR_PAR', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='retours_effectues', to='employee.zy00', verbose_name='Retour enregistré par')),
                ('MATERIEL', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='affectations', to='materiel.mtmt', verbose_name='Matériel')),
            ],
            options={
                'verbose_name': 'Affectation',
                'verbose_name_plural': 'Affectations',
                'db_table': 'materiel_affectation',
                'ordering': ['-DATE_DEBUT'],
            },
        ),
        migrations.CreateModel(
            name='MTMV',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('REFERENCE', models.CharField(max_length=30, unique=True, verbose_name='Référence')),
                ('TYPE_MOUVEMENT', models.CharField(choices=[('ENTREE', 'Entrée en stock'), ('SORTIE', 'Sortie définitive'), ('TRANSFERT', 'Transfert'), ('REFORME', 'Réforme'), ('PERTE', 'Perte/Vol'), ('INVENTAIRE', 'Ajustement inventaire')], max_length=20, verbose_name='Type de mouvement')),
                ('DATE_MOUVEMENT', models.DateField(verbose_name='Date du mouvement')),
                ('MOTIF', models.TextField(verbose_name='Motif')),
                ('LOCALISATION_ORIGINE', models.CharField(blank=True, max_length=200, null=True, verbose_name="Localisation d'origine")),
                ('LOCALISATION_DESTINATION', models.CharField(blank=True, max_length=200, null=True, verbose_name='Localisation de destination')),
                ('VALEUR_SORTIE', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True, verbose_name='Valeur à la sortie')),
                ('DOCUMENT_JUSTIFICATIF', models.FileField(blank=True, null=True, upload_to='materiel/mouvements/%Y/%m/', verbose_name='Document justificatif')),
                ('CREATED_AT', models.DateTimeField(auto_now_add=True)),
                ('UPDATED_AT', models.DateTimeField(auto_now=True)),
                ('EFFECTUE_PAR', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='mouvements_materiel', to='employee.zy00', verbose_name='Effectué par')),
                ('MATERIEL', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='mouvements', to='materiel.mtmt', verbose_name='Matériel')),
            ],
            options={
                'verbose_name': 'Mouvement',
                'verbose_name_plural': 'Mouvements',
                'db_table': 'materiel_mouvement',
                'ordering': ['-DATE_MOUVEMENT'],
            },
        ),
    ]
